!function(){var e,t,r,n,o,s={465:function(e,t){"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.server_context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.suspense_list"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.for("react.offscreen");Symbol.for("react.module.reference")},2744:function(e,t,r){"use strict";r(465)},2109:function(e,t){var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var s=typeof r;if("string"===s||"number"===s)e.push(r);else if(Array.isArray(r)){if(r.length){var i=o.apply(null,r);i&&e.push(i)}}else if("object"===s){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var a in r)n.call(r,a)&&r[a]&&e.push(a)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},4317:function(e,t,r){"use strict";var n=r(1238),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},i={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function c(e){return n.isMemo(e)?i:a[e.$$typeof]||o}a[n.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[n.Memo]=i;var u=Object.defineProperty,l=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,f=Object.prototype;e.exports=function e(t,r,n){if("string"!=typeof r){if(f){var o=p(r);o&&o!==f&&e(t,o,n)}var i=l(r);d&&(i=i.concat(d(r)));for(var a=c(t),g=c(r),m=0;m<i.length;++m){var v=i[m];if(!(s[v]||n&&n[v]||g&&g[v]||a&&a[v])){var y=h(r,v);try{u(t,v,y)}catch(e){}}}}return t}},3816:function(e){"use strict";e.exports=function(e,t,r,n,o,s,i,a){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,o,s,i,a],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},4641:function(e){e.exports={canvas:"ajg--G7"}},6861:function(e){e.exports={sidebar:"atVqIi",tool:"btVqIi",isActive:"ctVqIi",upDown:"dtVqIi"}},235:function(e){e.exports={sketch:"a7iVXO"}},7786:function(e){e.exports={toolbar:"a0Vd4--"}},7412:function(e){e.exports={colorContainer:"aFAjQC",color:"bFAjQC"}},2911:function(e){e.exports={tool:"aOQK--E",active:"bOQK--E"}},9362:function(e){e.exports={undoRedoBar:"avpLPM"}},9453:function(e){"use strict";const t="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;if(!t)throw new Error("Unable to find global scope. Are you sure this is running in the browser?");if(!t.AbortController)throw new Error('Could not find "AbortController" in the global scope. You need to polyfill it first');e.exports.H=t.AbortController},7595:function(e,t){"use strict";var r="function"==typeof Symbol&&Symbol.for,n=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,s=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,d=r?Symbol.for("react.concurrent_mode"):60111,h=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113,f=r?Symbol.for("react.suspense_list"):60120,g=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,v=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function S(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case l:case d:case s:case a:case i:case p:return e;default:switch(e=e&&e.$$typeof){case u:case h:case m:case g:case c:return e;default:return t}}case o:return t}}}function x(e){return S(e)===d}t.AsyncMode=l,t.ConcurrentMode=d,t.ContextConsumer=u,t.ContextProvider=c,t.Element=n,t.ForwardRef=h,t.Fragment=s,t.Lazy=m,t.Memo=g,t.Portal=o,t.Profiler=a,t.StrictMode=i,t.Suspense=p,t.isAsyncMode=function(e){return x(e)||S(e)===l},t.isConcurrentMode=x,t.isContextConsumer=function(e){return S(e)===u},t.isContextProvider=function(e){return S(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return S(e)===h},t.isFragment=function(e){return S(e)===s},t.isLazy=function(e){return S(e)===m},t.isMemo=function(e){return S(e)===g},t.isPortal=function(e){return S(e)===o},t.isProfiler=function(e){return S(e)===a},t.isStrictMode=function(e){return S(e)===i},t.isSuspense=function(e){return S(e)===p},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===s||e===d||e===a||e===i||e===p||e===f||"object"==typeof e&&null!==e&&(e.$$typeof===m||e.$$typeof===g||e.$$typeof===c||e.$$typeof===u||e.$$typeof===h||e.$$typeof===y||e.$$typeof===b||e.$$typeof===w||e.$$typeof===v)},t.typeOf=S},1238:function(e,t,r){"use strict";e.exports=r(7595)},1865:function(e,t,r){"use strict";r.d(t,{HC:function(){return E},JJ:function(){return R},V3:function(){return c},Wc:function(){return S},Yl:function(){return w},ZF:function(){return l},eF:function(){return b},fH:function(){return y},jt:function(){return u},lk:function(){return C},sX:function(){return n},si:function(){return x},wG:function(){return m}});const n={REQUEST:"request",SINGLETON:"singleton"},o="NotFound",s=(e,t)=>{const r=new Error(e);return Object.assign(r,Object.assign({},t,{stack:t.stack?`${r.stack}\n---- caused by: ----\n${t.stack}`:r.stack}))};function i(e){return e.toString().replace(/^Symbol\((.+)\)$/,"$1")}new Map;class a{constructor(e,t={}){this.isToken=!0,this.isModernToken=!0,this.name=e?Symbol.for(e):Symbol("token"),this.options=t}toString(){return i(this.name)}}function c(e,t){return new a(e,t)}function u(e){return{token:e,optional:!0}}const l=c("di"),d="__NOT_YET__MARKER",h="__CIRCULAR__MARKER";function p(e){return e.isModernToken?e.name:Symbol.for(e.toString())}function f(e,t,r,n,o){return{factory:e,resolvedDeps:t,scope:r,multi:n?[]:void 0,stack:o}}class g{constructor(e,t){this.records=new Map,this.recordValues=new Map,e&&e.forEach((e=>this.register(e))),this.fallback=t,this.register({provide:l,useValue:this})}get(e){var t,r;let n,a=!1,c=!1;"string"==typeof e?n=e:"token"in e?(n=e.token,a=e.optional,c=(null===(t=n.options)||void 0===t?void 0:t.multi)||!1):n=e,n=p(n);const u=this.getRecord(n);return!u&&(null===(r=this.fallback)||void 0===r?void 0:r.getRecord(n))?this.fallback.get(e):!u&&a?c?[]:null:(function(e,t){if(void 0===e){const e=i(t);throw s(`Token not found "${e}"`,{type:o})}}(u,n),this.hydrate(u,n,a))}getOfDeps(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=this.get(e[r]));return t}getRecord(e){return this.records.get(e)}has(e){return!!this.getRecord(p(e))}borrowToken(e,t){const r=p(t);if(!this.getRecord(r)){const t=e.getRecord(r);t&&(this.records.set(r,t),this.recordValues.set(t,d))}}getValue(e){return this.recordValues.get(e)}register(e){return function(e){if("string"==typeof e.provide)return;const t=e.provide.options;if(!e.provide.isModernToken&&t&&t.multi&&!e.multi)throw s(`Token ${e.provide.toString()} require multi providers`,{type:"RequireMulti",stack:e.__stack})}(e),this.processProvider(e)}processProvider(e){var t;const r=p(e.provide),o=function(e){let t,r,o=n.REQUEST;return"useFactory"in e?(t=t=>e.useFactory(t),"deps"in e&&(r=e.deps),e.scope&&(o=e.scope)):"useClass"in e&&(t=t=>new e.useClass(t),"deps"in e&&(r=e.deps),e.scope&&(o=e.scope)),f(t,r,o,!1,e.__stack)}(e),a=function(e){return"useValue"in e?e.useValue:d}(e);if(e.provide.isModernToken&&(null===(t=e.provide.options)||void 0===t?void 0:t.multi)||e.multi){let t=this.getRecord(r);if(t){if(void 0===t.multi)throw s(`Mixed multi-provider for ${i(r)}`,{type:"MixedMulti",stack:e.__stack})}else t=f(void 0,{},e.scope||n.REQUEST,!0,e.__stack),this.records.set(r,t),this.recordValues.set(t,d);t.multi.push(o)}else this.records.set(r,o);this.recordValues.set(o,a)}hydrateDeps(e){return this.getOfDeps(e.resolvedDeps)}hydrate(e,t,r){let n=this.getValue(e);if(function(e,t,r){if(r===h){const r=i(t);throw s(`Circular dep for "${r}"`,{type:"CircularDep",stack:e.stack})}}(e,t,n),n!==d)return n;if(e.multi)this.recordValues.set(e,h),n=e.multi.map((e=>this.hydrate(e,t,!1)));else{this.recordValues.set(e,h);try{n=e.factory(this.hydrateDeps(e))}catch(n){if(this.recordValues.set(e,d),r&&n.type===o)return null;!function(e,t){const r=i(e);throw t.__extendedWithStack?t.message+=` < ${r}`:(t.__extendedWithStack=!0,t.message=`${t.message} at "${r}"`),Object.hasOwnProperty.call(t,"stack")&&"string"==typeof t.stack&&(t.stack=t.stack.replace(/^.+\n/,`${t.name}: ${t.message}\n`)),t}(t,Object.assign(n,{stack:!e.stack||/---- caused by: ----/g.test(n.stack)?n.stack:`${n.stack}\n---- caused by: ----\n${e.stack||""}`}))}}return this.recordValues.set(e,n),n}}const m=c("isDiChildContainer");class v extends g{constructor(e,t){super(void 0,t),this.root=e,this.register({provide:l,useValue:this}),this.register({provide:m,useValue:!0})}getRecord(e){return super.getRecord(e)||this.root.getRecord(e)}getValue(e){return this.recordValues.has(e)?this.recordValues.get(e):e.scope!==n.SINGLETON&&e.factory?d:this.root.getValue(e)}hydrateDeps(e){return e.scope===n.REQUEST?super.hydrateDeps(e):super.hydrateDeps.call(this.root,e)}hydrate(e,t,r){return e.scope===n.REQUEST?super.hydrate(e,t,r):super.hydrate.call(this.root,e,t,r)}}function y(e){return new g(e)}const b="_module_parameters_";function w({providers:e,imports:t,deps:r={}}){return n=>Object.assign(n,{[b]:{providers:e,deps:r,imports:t,name:n.name,id:`${n.name}-${Math.random()}`}})}const S=e=>!!e.mainModule,x=e=>{let t;if(S(e)){const r=e.mainModule[b];t=Object.assign({},r),t.providers=t.providers.concat(e.providers||[]);const n=t.imports||[];t.imports=n.concat(e.imports||[])}else t=e[b];return t},k=e=>!1!==Boolean(e)&&(b in e||"mainModule"in e&&k(e.mainModule)),C=e=>{const t=[],r=new Set,n=new Set,o=e=>{if(!k(e))throw new Error("An invalid module was passed in the list of modules");const s=x(e);r.has(s.id)||(r.add(s.id),n.add(s.name),s.imports&&s.imports.forEach((e=>{o(e)})),t.push(e))};return e.forEach((e=>{o(e)})),t};function E(e,t){const r=new v(e);return t&&t.forEach((e=>{r.register(e)})),r}function R(e){return e}},5938:function(e){const t="object"==typeof performance&&performance&&"function"==typeof performance.now?performance:Date,r=e=>e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?n:null;class n extends Array{constructor(e){super(e),this.fill(0)}}class o{constructor(e){if(0===e)return[];const t=r(e);this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}e.exports=class{constructor(e={}){const{max:t=0,ttl:n,ttlResolution:s=1,updateAgeOnGet:i,allowStale:a,maxAge:c,stale:u}=e;this.max=t;const l=t?r(t):Array;this.keyMap=new Map,this.keyList=new Array(t).fill(null),this.valList=new Array(t).fill(null),this.next=new l(t),this.prev=new l(t),this.head=0,this.tail=0,this.free=new o(t),this.initialFill=1,this.size=0,this.allowStale=!!a||!!u,this.updateAgeOnGet=!!i,this.ttlResolution=s,this.ttl=n||c||0,this.ttl&&this.initializeTTLTracking()}initializeTTLTracking(){this.ttls=new n(this.max),this.starts=new n(this.max),this.setItemTTL=(e,r)=>{this.starts[e]=0!==r?t.now():0,this.ttls[e]=r},this.updateItemAge=e=>{this.starts[e]=0!==this.ttls[e]?t.now():0};let e=0;const r=()=>{const r=t.now();if(this.ttlResolution>0){e=r;const t=setTimeout((()=>e=0),this.ttlResolution);t.unref&&t.unref()}return r};this.isStale=t=>0!==this.ttls[t]&&0!==this.starts[t]&&(e||r())-this.starts[t]>this.ttls[t]}updateItemAge(e){}setItemTTL(e,t){}isStale(e){return!1}set(e,t,{ttl:r=this.ttl}={}){let n=0===this.size?void 0:this.keyMap.get(e);return void 0===n?(n=this.newIndex(),this.keyList[n]=e,this.valList[n]=t,this.keyMap.set(e,n),this.next[this.tail]=n,this.prev[n]=this.tail,this.tail=n,this.size++):(t!==this.valList[n]&&(this.valList[n]=t),this.moveToTail(n)),0===r||0!==this.ttl||this.ttls||this.initializeTTLTracking(),this.setItemTTL(n,r),this}newIndex(){return 0===this.size?this.tail:this.size===this.max&&0!==this.max?this.evict(!1):0!==this.free.length?this.free.pop():this.initialFill++}pop(){if(this.size){const e=this.valList[this.head];return this.evict(!0),e}}evict(e){const t=this.head,r=this.keyList[t];return e&&(this.keyList[t]=null,this.valList[t]=null,this.free.push(t)),this.head=this.next[t],this.keyMap.delete(r),this.size--,t}has(e){const t=this.keyMap.get(e);return void 0!==t&&!this.isStale(t)}peek(e,{allowStale:t=this.allowStale}={}){const r=this.keyMap.get(e);if(void 0!==r&&(t||!this.isStale(r)))return this.valList[r]}get(e,{allowStale:t=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet}={}){const n=this.keyMap.get(e);if(void 0!==n){const o=this.valList[n];return this.isStale(n)?(this.delete(e),t?o:void 0):(this.moveToTail(n),r&&this.updateItemAge(n),o)}}connect(e,t){this.prev[t]=e,this.next[e]=t}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}delete(e){let t=!1;if(0!==this.size){const r=this.keyMap.get(e);void 0!==r&&(t=!0,1===this.size?this.clear():(this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)))}return t}clear(){this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.size=0}}},7155:function(e,t,r){"use strict";r.d(t,{L:function(){return a},s:function(){return i}});var n=r(4121),o=r(9871),s=r.n(o);const i=e=>{const t=(0,n.useRef)(e);return s()(t.current,e)||(t.current=e),t.current},a=n.useLayoutEffect},8174:function(e,t,r){"use strict";var n=r(5591),o=r(2588),s=r(3096),i=r(4290);e.exports=n(2,(function(e,t){if(void 0===e&&(e=[]),void 0===t&&(t=[]),o(e))return e.concat(t);if(s(e)){for(var r=i(0,e.length,e),n=0;n<t.length;n++)r.push(t[n]);return r}return e+t}))},6570:function(e,t,r){"use strict";var n=r(5591),o=r(6403);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t=[]);for(var r=[],n=0;n<e.length;n++)o(e[n],t)<0&&r.push(e[n]);return r}))},759:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)e(t[r],r,t)}))},8202:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return t[r]}))},9955:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=0;r<t.length;r++)if(e(t[r],r,t))return r;return-1}))},1973:function(e,t,r){"use strict";var n=r(3096);e.exports=function e(t){void 0===t&&(t=[]);for(var r=[],o=0;o<t.length;o++){var s=t[o];if(n(s))for(var i=e(s),a=0;a<i.length;a++)r.push(i[a]);else r.push(s)}return r}},6403:function(e,t,r){"use strict";var n=r(5591),o=r(2135);e.exports=n(2,(function(e,t){return void 0===t&&(t=[]),o(t)?t.indexOf(e):Array.prototype.indexOf.call(t,e)}))},9266:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===t&&(t=[]);for(var r=t.length,n=new Array(r),o=0;o<r;o++)n[o]=e(t[o],o,t);return n}))},4290:function(e,t,r){"use strict";var n=r(5591),o=r(2135);e.exports=n(3,(function(e,t,r){return void 0===r&&(r=[]),o(r)?r.slice(e,t):Array.prototype.slice.call(r,e,t)}))},3061:function(e,t,r){"use strict";var n=r(2588),o=r(3096);e.exports=function(e){return n(e)?e:o(e)?Array.prototype.slice.call(e):[e]}},3607:function(e){"use strict";e.exports=function(e){void 0===e&&(e=[]);for(var t=[],r=0;r<e.length;r++)-1===t.indexOf(e[r])&&t.push(e[r]);return t}},6910:function(e,t,r){"use strict";var n=r(2588);e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n(t[0])?Object.assign.apply(Object,[[]].concat(t)):Object.assign.apply(Object,[{}].concat(t))}},2577:function(e){"use strict";e.exports=function(e){return function(){return e}}},8379:function(e){"use strict";e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){for(var e=t.length-1,r=t[e].apply(t,arguments),n=e-1;n>=0;n--)r=t[n](r);return r}}},5591:function(e){"use strict";e.exports=function(e,t){return function r(){for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return o.length>=e?t.apply(this,o):function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return r.apply(this,o.concat(t))}}}},5723:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){var r;function n(){var n=this,o=arguments;clearTimeout(r),r=setTimeout((function(){return t.apply(n,o)}),e)}return n.cancel=function(){return clearTimeout(r)},n}))},8830:function(e){"use strict";e.exports=function(e){return e}},6017:function(e,t,r){"use strict";var n=r(5591);e.exports=n(3,(function(e,t,r){return function(){return e.apply(void 0,arguments)?t.apply(void 0,arguments):r.apply(void 0,arguments)}}))},6957:function(e){"use strict";e.exports=function(){}},2588:function(e){"use strict";e.exports=function(e){return!!e&&Array.isArray(e)}},3096:function(e,t,r){"use strict";var n=r(2588),o=r(2135),s=r(8790);e.exports=function(e){switch(!0){case n(e):return!0;case!e:case"object"!=typeof e:case o(e):return!1;case 1===e.nodeType:return!!e.length;case 0===e.length:return!0;case e.length>0:return s("0",e)&&s(String(e.length-1),e)}return!1}},8210:function(e,t,r){"use strict";var n=r(6301),o=r(2588),s=r(2135),i=r(2202);e.exports=function(e){switch(!0){case n(e):return!0;case s(e):return""===e;case o(e):return 0===e.length;case i(e):return 0===Object.keys(e).length}return!1}},6301:function(e){"use strict";e.exports=function(e){return null==e}},2202:function(e){"use strict";e.exports=function(e){return null!==e&&"object"==typeof e}},6976:function(e,t,r){"use strict";var n=r(6948),o=r(7289),s=r(2202);e.exports=function(e){if(!s(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype&&(!n(e)&&!o(e))}},7289:function(e,t,r){"use strict";var n,o=r(8790);try{n=r(1238).isValidElementType}catch(e){}n||(n=function(e){return"string"==typeof e||"function"==typeof e||!!e&&o("$$typeof",e)}),e.exports=n},6948:function(e,t,r){"use strict";var n,o=r(8790);try{n=r(1238).isElement}catch(e){}n||(n=function(e){return!!e&&o("$$typeof",e)}),e.exports=n},9871:function(e,t,r){"use strict";var n=r(2202),o=Object.prototype.hasOwnProperty;e.exports=function(e,t){if(e===t)return!0;if(!n(e)||!n(t))return!1;var r=Object.keys(e);if(r.length!==Object.keys(t).length)return!1;for(var s=0;s<r.length;s++){var i=r[s];if(!o.call(t,i)||e[i]!==t[i])return!1}return!0}},2135:function(e){"use strict";e.exports=function(e){return"string"==typeof e||e instanceof String}},3114:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){for(var r in void 0===t&&(t={}),t)Object.prototype.hasOwnProperty.call(t,r)&&e(t[r],r,t)}))},8790:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}))},41:function(e,t,r){"use strict";var n=r(2202);e.exports=function(e){return n(e)?Object.keys(e):[]}},888:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===t&&(t={});var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=e(t[n],n,t));return r}))},6245:function(e,t,r){"use strict";var n=r(5591),o=r(6976),s=r(41),i=r(6910);e.exports=n(2,(function e(){for(var t=i((arguments.length<=0?void 0:arguments[0])||{}),r=1;r<arguments.length;r++){var n=r<0||arguments.length<=r?void 0:arguments[r];if(n)for(var a=s(n),c=0;c<a.length;c++){var u=a[c],l=n[u],d=t[u];o(d)&&o(l)?t[u]=e(d,l):t[u]=l}}return t}))},4084:function(e,t,r){"use strict";var n=r(5591),o=r(41),s=r(6910);e.exports=n(3,(function(e){for(var t=s(arguments.length<=1?void 0:arguments[1]),r=1;r<(arguments.length<=1?0:arguments.length-1);r++)for(var n=r+1<1||arguments.length<=r+1?void 0:arguments[r+1],i=o(n),a=0;a<i.length;a++){var c=i[a];Object.prototype.hasOwnProperty.call(t,c)?t[c]=e(t[c],n[c],c,t,n):t[c]=n[c]}return t}))},3073:function(e,t,r){"use strict";var n=r(5591),o=r(41);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=Object.create(null),n=0;n<e.length;n++)r[e[n]]=!0;for(var s={},i=o(t),a=0;a<i.length;a++){var c=i[a];r[c]||(s[c]=t[c])}return s}))},9046:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){void 0===e&&(e=[]),void 0===t&&(t={});for(var r=t,n=0;n<e.length;n++){if(null==r)return;r=r[e[n]]}return r}))},1687:function(e,t,r){"use strict";var n=r(5591),o=r(9046);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=[]),void 0===r&&(r={}),o(e,r)===t}))},9359:function(e,t,r){"use strict";var n=r(5591),o=r(9046);e.exports=n(3,(function(e,t,r){void 0===e&&(e=[]),void 0===r&&(r={});var n=o(e,r);return null!=n?n:t}))},9644:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){return null!=t?t[e]:void 0}))},3452:function(e,t,r){"use strict";var n=r(5591);e.exports=n(3,(function(e,t,r){for(var n in void 0===r&&(r={}),r)Object.prototype.hasOwnProperty.call(r,n)&&(t=e(t,r[n],n,r));return t}))},7822:function(e,t,r){"use strict";var n=r(41);e.exports=function(e){for(var t=n(e),r=t.length,o=new Array(r),s=0;s<r;s++)o[s]=e[t[s]];return o}},1547:function(e){"use strict";var t=/[&<>"']/g,r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},n=function(e){return r[e]};e.exports=function(e){return void 0===e&&(e=""),e.replace(t,n)}},8708:function(e,t,r){"use strict";var n=r(5591);e.exports=n(3,(function(e,t,r){return void 0===e&&(e=""),void 0===t&&(t=""),void 0===r&&(r=""),r.replace(e,t)}))},504:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),t.split(e)}))},3951:function(e,t,r){"use strict";var n=r(5591);e.exports=n(2,(function(e,t){return void 0===e&&(e=/()/),void 0===t&&(t=""),e.test(t)}))},5672:function(e){"use strict";e.exports=function(e){return void 0===e&&(e=""),e.toLowerCase()}},2553:function(e,t,r){"use strict";r.d(t,{HA:function(){return y},JC:function(){return b},Zv:function(){return v},ri:function(){return p}});var n=r(1865),o=r(877),s=r(4077),i=r(8174),a=r.n(i),c=r(4084),u=r.n(c),l=r(3073),d=r.n(l);class h{constructor({name:e,modules:t=[],bundles:r={},actions:s=[],providers:i}){this.di=(0,n.fH)(),this.modulesToResolve=new Set,this.walkOfProviders(function(e,t,r,s){return[{provide:o.Qo,scope:n.sX.SINGLETON,useValue:{appName:e}},{provide:o.om,scope:n.sX.SINGLETON,useValue:t},{provide:o.I7,scope:n.sX.SINGLETON,useValue:r,multi:!0},{provide:o.mJ,scope:n.sX.SINGLETON,useValue:s}]}(e,r,s,t)),(0,n.lk)(t).forEach((e=>{const t=(0,n.si)(e);this.modulesToResolve.add((0,n.Wc)(e)?e.mainModule:e),this.walkOfProviders(t.providers)})),i&&this.walkOfProviders(i)}async initialization(e,t="init"){const r=this.di.get({token:s.Fp,optional:!0}),n=null==r?void 0:r("tramvai-core"),i=this.di.get({token:o.S9,optional:!0});if(!i)throw new Error("`COMMAND_LINE_RUNNER_TOKEN` is not defined, have you added `@tramvai/module-common` to your dependency list?");null==n||n.warn({event:"tramvai-app-init",message:"Initializing. Run CommandLineRunner."});const a=await i.run(e,t);return null==n||n.warn({event:"tramvai-app-init",message:"CommandLineRunner executed successfully. Resolving modules."}),this.resolveModules(),null==n||n.warn({event:"tramvai-app-init",message:"Modules resolved successfully. Tramvai App initialized"}),a}walkOfProviders(e){e.forEach((e=>{this.di.register(e)}))}resolveModules(){this.modulesToResolve.forEach((e=>{new e(this.resolveModuleDeps(e))}))}resolveModuleDeps(e){const{deps:t}=e[n.eF];if(t)return this.di.getOfDeps(t)}}function p(e){let t;try{t=new h(e)}catch(e){throw e.appCreationError=!0,e}return t.initialization("client").then((()=>t))}const f=(e,t)=>Array.isArray(e)&&Array.isArray(t)?a()(e,t):"object"==typeof e&&"object"==typeof t?u()(f,e,t):t,g=u()(f),m=e=>{if(!e||!e.length)return{};const t=e.map((e=>g(m(e.presets),d()(["presets"],e))));return 1===t.length?t[0]:g(...t)};function v(e){let t={};return e.presets&&(t=m(e.presets)),g(t,e)}function y(e){return Object.assign({},e,{tramvaiActionVersion:2})}function b(e){return"tramvaiActionVersion"in e&&2===e.tramvaiActionVersion}},1919:function(e,t,r){"use strict";r.d(t,{GS:function(){return b},NJ:function(){return h},pY:function(){return S}});var n=r(7054),o=r(1865),s=r(877),i=r(4077),a=r(3844),c=r(5723),u=r.n(c),l=r(5668),d=r(6340);const h=(0,o.V3)("userAgent"),p=(0,l.yM)("setMedia"),f=(0,l.Lq)("media",{height:0,width:0,isTouch:!1,retina:!1,synchronized:!1}).on(p,((e,t)=>Object.assign({},e,t))),g=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),m=(0,l.yM)("setUserAgent"),v=(0,l.Lq)("userAgent",null).on(m,((e,t)=>t)),y=[{provide:i.Ym,multi:!0,useValue:[v,f]}];function b(){return(0,l.v9)("media",(({media:e})=>e))}let w=class{};w=(0,n.gn)([(0,o.Yl)({providers:[{provide:d.zJ,multi:!0,useValue:[f,v]}]})],w);let S=class{};S=(0,n.gn)([(0,o.Yl)({providers:[...y,(0,o.JJ)({provide:h,useFactory:({store:e})=>e.getState(v),deps:{store:i.kR}}),(0,o.JJ)({provide:s.Bi.clear,multi:!0,useFactory:({context:e,cookieManager:t})=>function(){const r=()=>{const r={width:window.innerWidth,height:window.innerHeight,isTouch:g,retina:window.matchMedia("(-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi)").matches};return t.set({name:"mediaInfo",value:JSON.stringify(r)}),e.dispatch(p(Object.assign({},r,{supposed:!1})))},n=u()(300,r);return window.addEventListener("orientationchange",n),window.addEventListener("resize",n),r()},deps:{context:i.l6,cookieManager:a.T}})]})],S)},5668:function(e,t,r){"use strict";r.d(t,{$J:function(){return S},Lq:function(){return j},j$:function(){return C},oR:function(){return F},ol:function(){return A},pD:function(){return N},v9:function(){return $},yM:function(){return O},zt:function(){return J}});var n=r(8379),o=r.n(n),s=r(8830),i=r.n(s),a=r(9871),c=r.n(a),u=r(130),l=(r(4317),r(3816)),d=r.n(l),h=r(4121),p=(r(2744),r(4073)),f=r(2588),g=r.n(f),m=r(7155),v=r(3061),y=r.n(v),b=r(248);r(2577),r(888);let w=()=>()=>e=>t=>e(t);var S={__proto__:null,get middleware(){return w}};const x=(e,t)=>{e.on("change",t),t()};class k{constructor(){this.listeners=[]}emit(e){this.listeners.forEach((e=>{e()}))}addListener(e,t){this.listeners.push(t)}on(e,t){this.addListener(e,t)}removeListener(e,t){const r=[];for(let e=0;e<this.listeners.length;e++)this.listeners[e]!==t&&r.push(this.listeners[e]);this.listeners=r}off(e,t){this.removeListener(e,t)}}const C=(e,t)=>"string"==typeof e?{payload:t,type:e,error:!1}:e;class E extends k{constructor(e,t,r,n){super(),this.applyDispatch=e=>{const t=this.dispatcher.handlers[e.type]||[];return t.length?(this.applyHandlers(e,t),e.payload):e.payload},this.dispatcher=e,this.storeInstances={},this.storeUnsubscribeCallbacks={},this.context=t,this.dispatcherInterface={getContext:()=>this.context,getStore:this.getStore.bind(this)},this.rehydratedStoreState={},this.fullState={},r&&this.rehydrate(r),(null==n?void 0:n.length)&&(this.applyDispatch=this.applyMiddlewares(n)),Object.keys(this.dispatcher.stores).forEach((e=>{this.getStore(e)}))}applyMiddlewares(e){let t=(...e)=>{throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")};const r={getState:this.getState.bind(this),subscribe:this.subscribe.bind(this),dispatch:(...e)=>t(...e)};return t=o()(...e.map((e=>e(r))))(this.applyDispatch),t}storeSubscribe(e,t){const r=()=>{const r=t.getState();r!==this.fullState[e]&&(this.fullState=Object.assign({},this.fullState,{[e]:r}),this.emit("change"))};x(t,r),this.storeUnsubscribeCallbacks[e]=()=>{t.off("change",r)}}getStore(e){let t,r=!1;"object"==typeof e?(t=e.store,r=e.optional):t=e;const n=this.dispatcher.getStoreName(t);if(!this.storeInstances[n]){let e=this.dispatcher.stores[n];if(!e){if("function"!=typeof t){if(r)return null;throw new Error(`Store ${n} was not registered.`)}this.dispatcher.registerStore(t),e=t}const o=new e(this.dispatcherInterface);if(this.storeInstances[n]=o,this.rehydratedStoreState&&this.rehydratedStoreState[n]){const e=this.rehydratedStoreState[n];o.rehydrate&&o.rehydrate(e),this.rehydratedStoreState[n]=null}this.storeSubscribe(n,o),e.dependencies&&e.dependencies.forEach((e=>{const t=this.getStore(e);x(t,(()=>{o.emit("change")}))}))}return this.storeInstances[n]}dispatch(e,t){if(!e)throw new Error(`eventOrType parameter ${e} is invalid.`);const r=C(e,t);return this.applyDispatch(r)}applyHandlers(e,t){const r={},n=e=>{if(r[e.name])return;const t=this.getStore(e.name);t&&("function"==typeof e.handler?r[e.name]=e.handler.bind(t):r[e.name]=t[e.handler].bind(t))},o=t.length;for(let e=0;e<o;e++)n(t[e]);return((e,t)=>{const r=Object.keys(t);for(let n=0;n<r.length;n++){const o=r[n],s=t[o];if(!s)throw new Error(`${o} does not have a handler for action ${e.type}`);s(e.payload,e.type)}})(e,r)}dehydrate(){const e={},t=Object.keys(this.storeInstances);for(let r=0;r<t.length;r++){const n=t[r],o=this.storeInstances[n];o.dehydrate()&&(e[n]=o.dehydrate())}return{stores:e}}rehydrate(e){if(e.stores){const t=Object.keys(e.stores);for(let r=0;r<t.length;r++){const n=t[r];this.rehydratedStoreState[n]=e.stores[n]}}}subscribe(...e){if("storeName"in e[0]){const t=e[0],r=e[1],n=this.getStore(t),o=()=>{const e=this.getState(t);r(e)};return n.on("change",o),()=>{n.off("change",o)}}const t=e[0],r=()=>{const e=this.getState();t(e)};return this.on("change",r),()=>{this.off("change",r)}}getState(e){return e?this.fullState[e.storeName]:this.fullState}setContext(e){this.context=e}hasStore(e){return e.storeName in this.storeInstances&&this.dispatcher.hasStore(e)}registerStore(e){this.dispatcher.registerStore(e),this.getStore(e)}unregisterStore(e){const{storeName:t}=e;this.dispatcher.unregisterStore(e),this.storeUnsubscribeCallbacks[t](),delete this.storeUnsubscribeCallbacks[t],delete this.rehydratedStoreState[t],delete this.storeInstances[t]}}class R{constructor(e){(e=e||{}).stores=e.stores||[],this.stores={},this.handlers={},e.stores.forEach((e=>{this.registerStore(e)}))}createContext(e,t,r){return new E(this,e,t,r)}hasStore(e){return!!this.stores[e.storeName]}registerStore(e){const{storeName:t}=e;this.stores[t]&&this.stores[t]===e||(this.stores[t]=e,e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.registerHandler(r,t,n)})))}unregisterStore(e){const{storeName:t}=e;this.stores[t]&&(delete this.stores[t],e.handlers&&Object.keys(e.handlers).forEach((r=>{const n=e.handlers[r];this.unregisterHandler(r,t,n)})))}getStoreName(e){return"string"==typeof e?e:e.storeName}registerHandler(e,t,r){this.handlers[e]=this.handlers[e]||[],this.handlers[e].push({name:t,handler:r})}unregisterHandler(e,t,r){Array.isArray(this.handlers[e])&&(this.handlers[e]=this.handlers[e].filter((e=>!(e.name===t&&e.handler===r))))}}function N(e){return new R(e)}function O(e,t=i()){const r=e,n=(...e)=>({type:r,payload:t(...e)});return n.getType=()=>r,n.toString=()=>r,n}function j(e,t){var r;const n={};return(r=class e extends k{constructor(){super(),this.state=t}static createEvents(t){const r=Object.keys(t),n={};return r.forEach((r=>{const o=t[r],s=O(`${r}`);n[r]=s,e.on(s,o)})),n}static on(t,r){if(Array.isArray(t))return t.forEach((t=>e.on(t,r))),e;const o=t.toString();return e.handlers[o]="handle",n[o]=r,e}getState(){return this.state}setState(e){this.state=e,this.emit("change")}dehydrate(){return this.state}rehydrate(e){this.state=e}handle(e,t){const r=n[t];r&&(this.state=r(this.state,e),this.emit("change"))}}).storeName=e,r.handlers={},r}class L{constructor(e){this.handleStateChange=()=>{this.onStateChange&&this.onStateChange()},this.stores=e,this.unsubscribe=void 0}isSubscribed(){return Boolean(this.unsubscribe)}setOnStateChange(e){this.onStateChange=e}trySubscribe(){this.unsubscribe||(this.unsubscribe=this.stores.filter(Boolean).map((e=>(e.on("change",this.handleStateChange),()=>{e.removeListener("change",this.handleStateChange)}))))}tryUnsubscribe(){this.unsubscribe&&(this.unsubscribe.forEach((e=>e())),this.unsubscribe=void 0),this.onStateChange=void 0}}const T=(0,h.createContext)(null),M=(0,h.createContext)(null),V=()=>{const e=(0,h.useContext)(T);if(!e)throw new Error('CONSUMER_CONTEXT not found, have you added "@tramvai/module-common"?');return e};function A(e){const t=V(),r=(0,m.s)(e);return(0,h.useMemo)((()=>g()(r)?r.map((e=>t.executeAction.bind(t,e))):t.executeAction.bind(t,r)),[r,t])}function F(e){const t=V(),r=(0,h.useContext)(M),n=(0,h.useRef)(e),o=(0,h.useRef)(null);t.hasStore(e)||(t.registerStore(e),o.current=e.storeName);const s=(0,h.useCallback)((r=>{const s=t.subscribe(e,r);return n.current=e,()=>{s(),o.current&&(t.unregisterStore(n.current),o.current=null)}}),[e,t]);return(0,p.useSyncExternalStore)(s,(()=>t.getState(e)),r?()=>r[e.storeName]:()=>t.getState(e))}const I=window;function _(){return"requestAnimationFrame"in I?requestAnimationFrame:"setImmediate"in I?I.setImmediate:setTimeout}const P=_();function $(e,t,r=c()){d()(t,"You must pass a selector to useSelectors");const n=V(),o=(0,h.useContext)(M),s=(0,h.useRef)(!1),i=(0,m.s)(e),a=(0,h.useMemo)((()=>new L(y()(i).map(n.getStore))),[i,n]),u=(0,h.useRef)(),l=(0,h.useCallback)((e=>(a.setOnStateChange((()=>{s.current||(s.current=!0,P((()=>{e(),s.current=!1})))})),a.trySubscribe(),()=>a.tryUnsubscribe())),[a]);let p;try{p=(0,b.useSyncExternalStoreWithSelector)(l,n.getState,o?()=>o:n.getState,t,r)}catch(e){let t=`An error occured while selecting the store state: ${e.message}.`;throw u.current&&(t+=`\nThe error may be correlated with this previous error:\n${u.current.stack}\n\nOriginal stack trace:`),new Error(t)}return(0,m.L)((()=>{u.current=void 0})),p}const J=({context:e,children:t,serverState:r})=>(0,u.jsx)(T.Provider,{value:e,children:(0,u.jsx)(M.Provider,{value:r,children:t})}),{Consumer:D}=T},6340:function(e,t,r){"use strict";r.d(t,{Bi:function(){return s},E:function(){return c},FE:function(){return u},iO:function(){return i},zJ:function(){return a}});var n=r(1865);const o={multi:!0},s={customerStart:(0,n.V3)("child-app customer_start",o),resolveUserDeps:(0,n.V3)("child-app resolve_user_deps",o),resolvePageDeps:(0,n.V3)("child-app resolve_page_deps",o),clear:(0,n.V3)("child-app clear",o),spaTransition:(0,n.V3)("child-app spa_transition",o),afterSpaTransition:(0,n.V3)("child-app after_spa_transition",o)},i=(0,n.V3)("child-app current config"),a=(0,n.V3)("child-app root state allowed store",o),c=(0,n.V3)("child-app root di borrow",o),u=(0,n.V3)("child-app initialAppState")},4077:function(e,t,r){"use strict";r.d(t,{E6:function(){return C},FM:function(){return u},Fp:function(){return E},Gu:function(){return N},J0:function(){return R},KI:function(){return y},PU:function(){return k},R$:function(){return c},R9:function(){return a},TZ:function(){return m},Tm:function(){return f},Ym:function(){return S},eP:function(){return h},gE:function(){return o},jm:function(){return w},k3:function(){return p},kR:function(){return x},l6:function(){return i},mj:function(){return T},oK:function(){return v},p7:function(){return M},qb:function(){return b},rX:function(){return O},vC:function(){return j},vV:function(){return L},vy:function(){return d},xC:function(){return g},xW:function(){return l},xj:function(){return s}});var n=r(1865);const o=(0,n.V3)("bundleManager"),s=(0,n.V3)("additional bundle",{multi:!0}),i=(0,n.V3)("context"),a=(0,n.V3)("actionRegistry"),c=(0,n.V3)("actionExecution"),u=(0,n.V3)("actionPageRunner"),l=(0,n.V3)("actionConditionals",{multi:!0}),d=(0,n.V3)("hooks"),h=(0,n.V3)("pubsubFactory"),p=(0,n.V3)("pubsub"),f=(0,n.V3)("rootPubsub"),g=(0,n.V3)("createCache"),m=(0,n.V3)("registerClearCache",{multi:!0}),v=(0,n.V3)("clearCache"),y=(0,n.V3)("componentRegistry"),b=(0,n.V3)("dispatcher"),w=(0,n.V3)("dispatcherContext"),S=(0,n.V3)("combineReducers",{multi:!0}),x=(0,n.V3)("store"),k=(0,n.V3)("storeMiddleware",{multi:!0}),C=(0,n.V3)("initialAppState"),E=(0,n.V3)("logger"),R=(0,n.V3)("loggerHook"),N=(0,n.V3)("requestManager"),O=(0,n.V3)("responseManager"),j=(0,n.V3)("environmentManager"),L=(0,n.V3)("common ExecutionContextManager"),T=(0,n.V3)("common rootExecutionContext"),M=(0,n.V3)("common commandLineExecutionContext")},3844:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});const n=(0,r(1865).V3)("cookieManager")},877:function(e,t,r){"use strict";r.d(t,{Bi:function(){return a},I7:function(){return u},PR:function(){return i},Qo:function(){return d},S9:function(){return s},mJ:function(){return l},om:function(){return c}});var n=r(1865);const o={multi:!0},s=(0,n.V3)("commandLineRunner"),i=(0,n.V3)("commandLines"),a={init:(0,n.V3)("init",o),listen:(0,n.V3)("listen",o),customerStart:(0,n.V3)("customer_start",o),resolveUserDeps:(0,n.V3)("resolve_user_deps",o),resolvePageDeps:(0,n.V3)("resolve_page_deps",o),generatePage:(0,n.V3)("generate_page",o),clear:(0,n.V3)("clear",o),spaTransition:(0,n.V3)("spa_transition",o),afterSpaTransition:(0,n.V3)("after_spa_transition",o),close:(0,n.V3)("close",o)},c=(0,n.V3)("bundleList"),u=(0,n.V3)("actionsList"),l=(0,n.V3)("modulesList"),d=(0,n.V3)("appInfo")},7054:function(e,t,r){"use strict";function n(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}r.d(t,{gn:function(){return n}}),Object.create,Object.create},8055:function(e,t,r){"use strict";var n=r(2553);function o(e,t){if(null==e)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}var s=r(7054),i=r(3114),a=r.n(i),c=r(1865),u=r(877);const l="__action_parameters__";var d=r(4077),h=r(5668);class p{constructor(){this.parameters={}}get(e){return this.parameters[e]}getInt(e,t){const r=Number(e in this.parameters?this.parameters[e]:t);return Number.isFinite(r)?r:t}getAll(){return this.parameters}update(e){this.parameters=Object.assign(this.parameters,e)}clientUsed(){return this.getAll()}updateClientUsed(e){this.update(e)}}const f=(0,h.Lq)("environment",{});let g=class{};g=(0,s.gn)([(0,c.Yl)({providers:[{provide:d.vC,useFactory:({store:e})=>{const t=new p;return t.update(e.getState(f)),t},scope:c.sX.SINGLETON,deps:{store:d.kR}},{provide:d.Ym,useValue:f,multi:!0}]})],g);var m=r(1919);class v{constructor(e={}){this.defaults=e}get(e){const t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}if(i===e||o===e)try{return decodeURIComponent(s)}catch(e){return console.warn("Decode cookie value error",e),s}}}set(e,t,r){if(!e)return;const{domain:n,path:o,expires:s,secure:i,httpOnly:a,sameSite:c}=function(e={},t={}){var r,n,o,s,i;return{expires:e.expires||t.expires,domain:e.domain||t.domain,path:null!==(n=null!==(r=e.path)&&void 0!==r?r:t.path)&&void 0!==n?n:"/",secure:null!==(o=e.secure)&&void 0!==o?o:t.secure,httpOnly:null!==(s=e.httpOnly)&&void 0!==s?s:t.httpOnly,sameSite:null!==(i=e.sameSite)&&void 0!==i?i:t.sameSite}}(r,this.defaults),u=function(e){return e?new Date("number"==typeof e?(new Date).getTime()+864e5*e:e):null}(s),l=e.replace(/[^+#$&^`|]/g,encodeURIComponent).replace("(","%28").replace(")","%29"),d=("string"==typeof t?t:"").replace(/[^+#$&/:<-\[\]-}]/g,encodeURIComponent),h=u&&u.getTime()>=0?`;expires=${u.toUTCString()}`:"",p=n?`;domain=${n}`:"",f=o?`;path=${o}`:"",g=i?";secure":"",m=a?";httponly":"",v=c?`;samesite=${c}`:"";document.cookie=`${l}=${d}${h}${p}${f}${g}${m}${v}`}erase(e,t={}){this.set(e,"",{expires:-1,domain:t.domain,path:t.path,secure:!1,httpOnly:!1})}all(){const e={},t=document.cookie.split(";");for(;t.length;){const r=t.pop();if(!r)break;let n=r.indexOf("=");n=n<0?r.length:n;const o=r.slice(0,n).replace(/^\s+/,""),s=r.slice(n+1);let i,a;try{i=decodeURIComponent(o)}catch(e){console.warn("Decode cookie name error",e)}try{a=decodeURIComponent(s)}catch(e){console.warn("Decode cookie value error",e)}e[null!=i?i:o]=null!=a?a:s}return e}}var y=r(3844);const b=["sameSite","noSubdomains"],w=["name","value"],S=/^(?:::(?:ffff:(0:)?)?)?(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,x=/^([0-9a-fA-F]{1,4}:){1,4}:(?:[0-9]{1,3}\.){3}[0-9]{1,3}$/,k=e=>{if(e)return new Date("number"==typeof e?+new Date+1e3*e:e)};class C{constructor(){this.cache=Object.create(null)}get(e){return this.cache[e]||void 0}set(e,t){this.cache[e]=t}erase(e){delete this.cache[e]}all(){return this.cache}}let E=class{};E=(0,s.gn)([(0,c.Yl)({imports:[m.pY],providers:[(0,c.JJ)({provide:y.T,useClass:class{constructor({cookieOptions:e={},userAgent:t}){const r="https:"===window.location.protocol;this.cookies=(()=>{const e="testcookiesenabled";return document.cookie=e,document.cookie.indexOf(e)>-1&&(document.cookie=`${e}; expires=Thu, 01 Jan 1970 00:00:01 GMT'`,!0)})()?new v(Object.assign({sameSite:t.sameSiteNoneCompatible&&r?"none":"lax",secure:r},e)):new C,this.userAgent=t}get(e){return this.cookies.get(e)||void 0}set(e){let{name:t,value:r}=e,n=o(e,w);this.cookies.set(t,r,(({userAgent:{sameSiteNoneCompatible:e},defaultHost:t,secureProtocol:r},n)=>{let{sameSite:s,noSubdomains:i}=n,a=o(n,b);return Object.assign({},a,"none"!==s||e&&r?{sameSite:s}:{},r&&"none"===s&&e?{secure:!0}:{},{expires:k(a.expires),domain:i?(c=a.domain||t,(e=>S.test(e)||x.test(e))(c)?c:(e=>e.replace(/:\d+$/,""))(c.indexOf("localhost")>=0?c:`.${c.split(".").slice(-2).join(".")}`)):a.domain});var c})({userAgent:this.userAgent,defaultHost:window.location.hostname,secureProtocol:"https:"===window.location.protocol},n))}all(){return this.cookies.all()}remove(e,t){return this.cookies.erase(e,t)}},scope:c.sX.SINGLETON,deps:{cookieOptions:{token:"temporary cookieOptions",optional:!0},userAgent:m.NJ}})]})],E);var R=r(5672),N=r.n(R),O=r(3061),j=r.n(O),L=r(6957),T=r.n(L),M=r(1687),V=r.n(M),A=r(2135),F=r.n(A),I=r(2202),_=r.n(I),P=r(2588),$=r.n(P);const J=(e,t,r)=>{try{return JSON.stringify(e,t,r)}catch(n){return((e,t,r)=>{const n=new Set,o=t||(e=>e);return JSON.stringify(e,((e,t)=>t&&"object"==typeof t?n.has(t)?"[~Circular~]":(n.add(t),o(t)):o(t)),r)})(e,t,r)}},D={trace:50,debug:40,info:30,warn:20,error:10,fatal:0,silent:-1/0},U={50:"trace",40:"debug",30:"info",20:"warn",10:"error",0:"fatal"},H=e=>new RegExp(`^${e.replace(/\*/g,".*?")}$`);class B{constructor(e={name:""}){if(this.name=N()(e.name),this.key=e.key||this.name,B.instances[this.key])return B.instances[this.key];this.beforeReporters=e.beforeReporters||[],this.reporters=e.reporters||[],this.filters=e.filters||[],this.extensions=e.extensions||[],this.defaults=e.defaults||{},e.level&&this.setLevel(D[e.level]),e.enabled&&this.setLevel(D.trace),this.checkEnabled(),B.instances[this.key]=this,a()(((e,t)=>{this[t]=(...t)=>this.log(e,t)}),D)}static save(){var e;null===(e=B.onChange)||void 0===e||e.call(B,{level:B.level,enabledName:this.enabledName,enabledLevel:this.enabledLevel})}static load(e){B.level=e.level,B.enabledName=e.enabledName,B.enabledLevel=e.enabledLevel}static setLevel(e){var t;B.level=null!==(t=D[e])&&void 0!==t?t:B.level,B.save()}static setOnChange(e){B.onChange=e}static enable(e,t){const[r,n]=t?[D[e],t]:[D.trace,e];B.enabledName.push(n),B.enabledLevel.push(r),B.save();const o=H(n);a()((e=>{const{name:t}=e;o.test(t)&&e.setLevel(r)}),B.instances)}static disable(e,t){const[r,n]=t?[D[e],t]:[D.silent,e],o=B.enabledName.indexOf(n);o>-1?(B.enabledName.splice(o,1),B.enabledLevel.splice(o,1)):(B.enabledName.push(n),B.enabledLevel.push(r)),B.save();const s=H(n);a()((e=>{const{name:t}=e;s.test(t)&&e.setLevel(r)}),B.instances)}static clear(){B.level=D.silent,B.enabledName=[],B.enabledLevel=[],B.save(),a()((e=>{e.setLevel(void 0)}),B.instances)}static setGlobalReporters(e){const t=j()(e);a()((e=>{e.reporters=t}),B.instances)}child(e){const t="string"==typeof e?{name:e}:e,r=t.key||t.name,n=this.name?`${this.name}.${t.name}`:t.name,o=this.key?`${this.key}.${r}`:r;return new B(Object.assign({beforeReporters:this.beforeReporters,reporters:this.reporters,filters:this.filters,extensions:this.extensions,defaults:this.defaults},t,{name:n,key:o}))}addBeforeReporter(e){this.beforeReporters=this.beforeReporters.concat(e)}setBeforeReporters(e){this.beforeReporters=j()(e)}addReporter(e){this.reporters=this.reporters.concat(e)}setReporters(e){this.reporters=j()(e)}addFilter(e){this.filters=this.filters.concat(e)}setFilters(e){this.filters=j()(e)}addExtension(e){this.extensions=this.extensions.concat(e),this.extensions.push(e)}setExtensions(e){this.extensions=j()(e)}setLevel(e){this.level=e}checkEnabled(){for(let e=B.enabledName.length-1;e>=0;e--){const t=B.enabledName[e];if(H(t).test(this.name))return void this.setLevel(B.enabledLevel[e])}}createLogObj(e,t){return Object.assign({date:new Date},this.defaults,{name:this.name,type:U[e],level:e,args:t})}log(e,t){let r;this.beforeReporters.length&&(r=this.createLogObj(e,t));for(const e of this.beforeReporters)e.log(r);if(void 0===this.level){if(e>B.level)return!1}else if(e>this.level)return!1;r||(r=this.createLogObj(e,t));for(const e of this.filters)if(!1===e.filter(r))return!1;for(const e of this.extensions)r=e.extend(r);for(const e of this.reporters)e.log(r);return!0}}B.level=D.silent,B.instances={},B.enabledName=[],B.enabledLevel=[];const q=["addBeforeReporter","setBeforeReporters","addReporter","setReporters","addFilter","setFilters","addExtension","setExtensions",...Object.keys(D)],Y=e=>{const t=new B(e);return Object.assign((e=>t.child(e)),q.reduce(((e,r)=>(t[r]&&(e[r]=t[r].bind(t)),e)),{}),{setLevel:B.setLevel,setGlobalReporters:B.setGlobalReporters,enable:B.enable,disable:B.disable,clear:B.clear})};class G{constructor(){this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c00046",10:"#c0392b",20:"#f39c12",30:"#00BCD4"}}log(e){const t=e.level<20?console.error:20===e.level?console.warn:console.log,r=`\n      background: ${this.levelColorMap[e.level]||this.defaultColor};\n      border-radius: 0.5em;\n      color: white;\n      font-weight: bold;\n      padding: 2px 0.5em;\n    `,n=`%c${[e.name,e.type].filter(Boolean).join(":")}`;"string"==typeof e.args[0]?t.call(console,`${n}%c ${e.args[0]}`,r,"",...e.args.slice(1)):t.call(console,n,r,...e.args)}}const X="_t_logger";let z,W;try{z=window.localStorage,W=JSON.parse(z.getItem(X))}catch(e){}W||(W=(()=>{try{return(e=>{if(!e)return;const t=e.split(",");return{level:D.silent,enabledLevel:Array(t.length).fill(D.trace),enabledName:t}})(window.localStorage.getItem("debug"))}catch(e){}})()),B.setOnChange((e=>{try{z.setItem(X,JSON.stringify(e))}catch(e){}})),W&&B.load(W);const Q=Y({name:"",reporters:[new G]});window.logger=Q;const K=e=>(F()(e)&&(e=new Error(e)),Object.assign({},e,{body:J(e.body),code:J(e.code),message:e.message,stack:e.stack}));class Z{constructor({requestCount:e,makeRequest:t,emitLevels:r}){this.reqCount=0,this.queue=[],this.requestCount=e||1,this.makeRequest=t,this.emitLevels=r||{fatal:!0}}checkQueue(){this.queue.length&&this.reqCount<this.requestCount&&this.sendRequest()}sendRequest(){const e=this.queue.shift();this.reqCount++,this.makeRequest((e=>{let t,r,n=null;const{args:o}=e;o[0]instanceof Error?(r=K(o[0]),t=F()(o[1])?o[1]:o[0].message):_()(o[0])&&!$()(o[0])?(n=o[0],r=n.error&&K(n.error),o[0].message?t=o[0].message:F()(o[1])&&(t=o[1])):t=o[0];const s=o.slice(t===o[1]?2:1).map((e=>e instanceof Error?{error:K(e)}:e));return Object.assign({},e,{args:s.length?s:void 0},n,{error:r,message:t})})(e)).catch(T()).then((()=>{this.reqCount--,this.checkQueue()}))}remote(e){this.queue.push(e),this.checkQueue()}log(e){const{type:t,remote:r}=e;null==r?this.emitLevels[t]&&this.remote(e):(!0===r||V()(["emitLevels",t],!0,r))&&this.remote(Object.assign({},e,{remote:void 0}))}}const ee=(0,c.V3)("serverModulePapiPublicUrl"),te=(0,c.V3)("serverModulePapiPrivateUrl"),re=(0,c.V3)("serverModulePapiPrivateRoute",{multi:!0});var ne=r(759),oe=r.n(ne),se=r(504),ie=r.n(se);const ae=(0,h.yM)("setLogs"),ce=(0,h.Lq)("devLogs",[]).on(ae,((e,t)=>t));class ue{constructor(e){this.logs=[],this.logs=e}extend(e){const[t]=e.args;return this.logs[t]}}(0,c.JJ)({provide:d.J0,multi:!0,useFactory:({reporter:e})=>t=>{t.addReporter(e)},deps:{reporter:"ssrDevReporter"}}),(0,c.JJ)({provide:"ssrDevReporter",scope:c.sX.SINGLETON,useClass:class{constructor(){this.logs=[]}log(e){this.logs.push(e)}start(){this.reset()}reset(){this.logs=[]}flush(){const e=this.logs;return this.reset(),e}}}),(0,c.JJ)({provide:d.Ym,multi:!0,useValue:ce}),(0,c.JJ)({provide:u.Bi.customerStart,multi:!0,useFactory:({reporter:e})=>function(){e.start()},deps:{reporter:"ssrDevReporter"}}),(0,c.JJ)({provide:u.Bi.generatePage,multi:!0,useFactory:({context:e,reporter:t})=>{const r=t.flush();return function(){return e.dispatch(ae(r))}},deps:{context:d.l6,reporter:"ssrDevReporter"}}),(0,c.JJ)({provide:re,multi:!0,useFactory:({environmentManager:e})=>{return t={method:"get",path:"/logger",async handler({parsedUrl:{query:t}}){const{mode:r,level:n,enable:o}=t,s=r||n||o;let i,a;"default"===r&&(i=e.get("DEBUG_LEVEL"),a=e.get("DEBUG_ENABLE")),n&&(i=n),o&&(a=o),s&&Q.clear(),i&&Q.setLevel(i),a&&oe()((e=>{const[t,r]=e.split(":");Q.enable(t,r)}),ie()(",",a))}},Object.assign(t.handler,{__papi_parameters__:Object.assign({},t,{options:Object.assign({timeout:1e4},t.options),method:t.method||"all"})});var t},deps:{environmentManager:d.vC}}),(0,c.JJ)({provide:d.Ym,multi:!0,useValue:ce}),(0,c.JJ)({provide:u.Bi.customerStart,multi:!0,useFactory:({logger:e,store:t})=>function(){const r=t.getState(ce);((e,t)=>{t&&t.length&&(console.groupCollapsed("%c🚀 Tramvai SSR Logs","font-size: 110%"),t.forEach(((t,r)=>e[t.type](r))),console.groupEnd())})(e({name:"ssr-logger",beforeReporters:[],reporters:[new G],extensions:[new ue(r)]}),r)},deps:{logger:d.Fp,store:d.kR}});const le=Y({name:"",key:"tramvai",reporters:[new G]});let de=class{};de=(0,s.gn)([(0,c.Yl)({providers:[{provide:d.Fp,useFactory({loggerInitHooks:e}){if(e)for(const t of e)t(le);return le},deps:{loggerInitHooks:{token:d.J0,multi:!0,optional:!0}}}]})],de);var he=r(3607),pe=r.n(he),fe=r(4121),ge=r.n(fe),me=r(130),ve=r(4317),ye=r.n(ve),be=r(888),we=r.n(be);function Se(){return Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Se.apply(this,arguments)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}var ke=r(1238);var Ce=ge().createContext(),Ee={},Re="PENDING",Ne="REJECTED",Oe=function(e){return e};function je(e){var t=e.defaultResolveComponent,r=void 0===t?Oe:t,n=e.render,s=e.onLoad;function i(e,t){void 0===t&&(t={});var i=function(e){return"function"==typeof e?{requireAsync:e,resolve:function(){},chunkName:function(){}}:e}(e),a={};function c(e){return t.cacheKey?t.cacheKey(e):i.resolve?i.resolve(e):"static"}function u(e,n,o){var s=t.resolveComponent?t.resolveComponent(e,n):r(e);if(t.resolveComponent&&!(0,ke.isValidElementType)(s))throw new Error("resolveComponent returned something that is not a React component!");return ye()(o,s,{preload:!0}),s}var l,d,h=function(e){var t=c(e),r=a[t];return r&&r.status!==Ne||((r=i.requireAsync(e)).status=Re,a[t]=r,r.then((function(){r.status="RESOLVED"}),(function(t){console.error("loadable-components: failed to asynchronously load component",{fileName:i.resolve(e),chunkName:i.chunkName(e),error:t?t.message:t}),r.status=Ne}))),r},p=function(e){var r,l;function d(r){var n;return(n=e.call(this,r)||this).state={result:null,error:null,loading:!0,cacheKey:c(r)},function(e,t){if(!e){var r=new Error("loadable: "+t);throw r.framesToPop=1,r.name="Invariant Violation",r}}(!r.__chunkExtractor||i.requireSync,"SSR requires `@loadable/babel-plugin`, please install it"),r.__chunkExtractor?(!1===t.ssr||(i.requireAsync(r).catch((function(){return null})),n.loadSync(),r.__chunkExtractor.addChunk(i.chunkName(r))),function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)):(!1!==t.ssr&&(i.isReady&&i.isReady(r)||i.chunkName&&Ee[i.chunkName(r)])&&n.loadSync(),n)}l=e,(r=d).prototype=Object.create(l.prototype),r.prototype.constructor=r,xe(r,l),d.getDerivedStateFromProps=function(e,t){var r=c(e);return Se({},t,{cacheKey:r,loading:t.loading||t.cacheKey!==r})};var p=d.prototype;return p.componentDidMount=function(){this.mounted=!0;var e=this.getCache();e&&e.status===Ne&&this.setCache(),this.state.loading&&this.loadAsync()},p.componentDidUpdate=function(e,t){t.cacheKey!==this.state.cacheKey&&this.loadAsync()},p.componentWillUnmount=function(){this.mounted=!1},p.safeSetState=function(e,t){this.mounted&&this.setState(e,t)},p.getCacheKey=function(){return c(this.props)},p.getCache=function(){return a[this.getCacheKey()]},p.setCache=function(e){void 0===e&&(e=void 0),a[this.getCacheKey()]=e},p.triggerOnLoad=function(){var e=this;s&&setTimeout((function(){s(e.state.result,e.props)}))},p.loadSync=function(){if(this.state.loading)try{var e=u(i.requireSync(this.props),this.props,g);this.state.result=e,this.state.loading=!1}catch(e){console.error("loadable-components: failed to synchronously load component, which expected to be available",{fileName:i.resolve(this.props),chunkName:i.chunkName(this.props),error:e?e.message:e}),this.state.error=e}},p.loadAsync=function(){var e=this,t=this.resolveAsync();return t.then((function(t){var r=u(t,e.props,g);e.safeSetState({result:r,loading:!1},(function(){return e.triggerOnLoad()}))})).catch((function(t){return e.safeSetState({error:t,loading:!1})})),t},p.resolveAsync=function(){var e=this.props,t=(e.__chunkExtractor,e.forwardedRef,o(e,["__chunkExtractor","forwardedRef"]));return h(t)},p.render=function(){var e=this.props,r=e.forwardedRef,s=e.fallback,i=(e.__chunkExtractor,o(e,["forwardedRef","fallback","__chunkExtractor"])),a=this.state,c=a.error,u=a.loading,l=a.result;if(t.suspense&&(this.getCache()||this.loadAsync()).status===Re)throw this.loadAsync();if(c)throw c;var d=s||t.fallback||null;return u?d:n({fallback:d,result:l,options:t,props:Se({},i,{ref:r})})},d}(ge().Component),f=(d=function(e){return ge().createElement(Ce.Consumer,null,(function(t){return ge().createElement(l,Object.assign({__chunkExtractor:t},e))}))},(l=p).displayName&&(d.displayName=l.displayName+"WithChunkExtractor"),d),g=ge().forwardRef((function(e,t){return ge().createElement(f,Object.assign({forwardedRef:t},e))}));return g.displayName="Loadable",g.preload=function(e){g.load(e)},g.load=function(e){return h(e)},g}return{loadable:i,lazy:function(e,t){return i(e,Se({},t,{suspense:!0}))}}}var Le=je({defaultResolveComponent:function(e){return e.__esModule?e.default:e.default||e},render:function(e){var t=e.result,r=e.props;return ge().createElement(t,r)}}),Te=Le.loadable,Me=Le.lazy,Ve=je({onLoad:function(e,t){e&&t.forwardedRef&&("function"==typeof t.forwardedRef?t.forwardedRef(e):t.forwardedRef.current=e)},render:function(e){var t=e.result,r=e.props;return r.children?r.children(t):null}}),Ae=Ve.loadable,Fe=Ve.lazy,Ie=Te;Ie.lib=Ae,Me.lib=Fe;const _e=Ie,Pe=(0,fe.createContext)(null);function $e(e){const t=(()=>{const e=(0,fe.useContext)(Pe);if(!e)throw new Error("DI container not found");return e})();return(0,fe.useMemo)((()=>{return"[object Object]"!==e.toString()||"token"in(r=e)&&(1===Object.keys(r).length||"boolean"==typeof r.optional||"boolean"==typeof r.multi)?t.get(e):we()((e=>t.get(e)),e);var r}),[e,t])}const Je=()=>(0,me.jsxs)("div",{children:[(0,me.jsx)("div",{style:{textAlign:"center",marginBottom:11,paddingTop:26,fontSize:30,lineHeight:"36px",fontWeight:200},children:"An error occurred :("}),(0,me.jsxs)("div",{style:{textAlign:"center",marginBottom:17,color:"#9299a2",fontSize:20,lineHeight:"24px"},children:["Try"," ",(0,me.jsx)("a",{href:"",onClick:()=>window.location.reload(),children:"reloading the page"})]})]});Je.displayName="FallbackError";class De extends fe.Component{constructor(e){super(e),this.state={error:e.error||null,url:e.url}}static getDerivedStateFromProps(e,t){return e.url!==t.url?{error:e.error||null,url:e.url}:{error:e.error||t.error,url:t.url}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallback:t,fallbackFromDi:r}=this.props,{url:n,error:o}=this.state;return o?t?(0,me.jsx)(t,{url:n,error:o}):r||(0,me.jsx)(Je,{}):e}}De.displayName="UniversalErrorBoundary";const Ue=(0,c.V3)("reactErrorBoundaryHandlers",{multi:!0}),He=(0,c.V3)("errorBoundaryFallbackComponent");let Be=class extends fe.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){const{errorHandlers:r}=this.props;r&&r.forEach((r=>{r(e,t)}))}render(){const{children:e,fallbackComponent:t,fallbackComponentFromDi:r}=this.props,{hasError:n}=this.state;return n?t||r||(0,me.jsx)(Je,{}):e}};var qe;Be.displayName="ErrorBoundary",Be=(0,s.gn)([(qe={errorHandlers:{token:Ue,optional:!0},fallbackComponentFromDi:{token:He,optional:!0}},e=>ye()((function(t){const r=$e(qe);return(0,me.jsx)(e,Object.assign({},t,r))}),e))],Be);const Ye=async e=>{if(e){if("load"in e&&"function"==typeof e.load){const t=await e.load();let r;return r=t.__esModule?t.default:t.default||t,ye()(e,r),r}return e}},Ge=(e,t)=>{if("CSS_CHUNK_LOAD_FAILED"===(null==e?void 0:e.code)){const r=e.request;if(document.querySelector(`link[href="${r}"]`)||document.querySelector(`link[data-href="${r}"]`))return t()}throw e},Xe={routes:{"@/routes/index":((e,t={})=>{const r=e.importAsync;return e.importAsync=()=>r().catch((e=>Ge(e,r))),_e(e,{fallback:t.loading})})({chunkName:()=>"@_routes_index",requireSync(e){return r(this.resolve(e))},isReady(e){const t=this.resolve(e);return!!r.m[t]},importAsync:()=>r.e("@_routes_index").then(r.bind(r,6716)),requireAsync(e){return this.resolve(e),this.importAsync(e).then((e=>e))},resolve:()=>6716})},pages:{},layouts:{},errorBoundaries:{}},ze=()=>Xe.layouts,We=()=>Xe.errorBoundaries,Qe=e=>!!e&&0===e.indexOf("@/"),Ke=e=>`${e}__layout`,Ze=e=>`${e}__errorBoundary`,et=e=>{const t=e,r=(e=>`/${e.replace("@/routes/","").replace(/\[(.+)\]/g,":$1").replace(/index$/g,"")}`)(e),n=ze(),o=We(),s={name:t,path:r,config:{pageComponent:e}};return e in n&&(s.config.nestedLayoutComponent=Ke(e)),e in o&&(s.config.errorBoundaryComponent=Ze(e)),s};var tt=r(9359),rt=r.n(tt),nt=r(1973),ot=r.n(nt);const st=(0,c.V3)("fastify request"),it=(0,c.V3)("fastify response");var at=r(3951);const ct=["href","path","query","origin","port","username","password"],ut=(r.n(at)()(/^(?:[a-z]+:)?\/\//i),e=>e.pathname+e.search+e.hash),lt=e=>{const t=Object.create(null);e.searchParams.forEach(((e,r)=>{Object.prototype.hasOwnProperty.call(t,r)?Array.isArray(t[r])?t[r].push(e):t[r]=[t[r],e]:t[r]=e}));const r=e.toString(),n=ut(e),o={href:n,origin:e.origin,protocol:e.protocol,username:e.username,password:e.password,port:e.port,pathname:e.pathname,path:n,search:e.search,hash:e.hash,query:t};return"localhost"!==e.host&&Object.assign(o,{href:e.href,host:e.host,hostname:e.hostname}),Object.defineProperty(o,"toString",{value:()=>r,enumerable:!1}),o},dt=(e,t=(()=>window.location.href)())=>new URL((e=>{if(e.length<2)return!1;for(let t=0;t<e.length;t++)switch(e[t]){case"?":return!0;case"/":break;default:return!1}return!0})(e)?e.replace(/^\/+/,"/"):e,t),ht=e=>lt(dt(e)),pt=/^(\/[^?\s]*)(\?[^\s]*)?(#[^s]*)?$/,ft=(e,t)=>{a()(((t,r)=>{Array.isArray(t)?(e.delete(r),oe()((t=>e.append(r,t)),t)):void 0===t?e.delete(r):e.set(r,t)}),t)};var gt=r(8210),mt=r.n(gt),vt=r(7822),yt=r.n(vt);const bt=(0,c.V3)("commandLineRunner timingInfo"),wt=(0,c.V3)("commandLineRunner executionEnd",{multi:!0}),St=["message","httpStatus"],xt=["message"],kt=["message","nextUrl","httpStatus"],Ct=["message","cause","contextName"],Et=["message","contextName"],Rt=["message","contextName"],Nt=["message","conditionName","targetName"];class Ot extends Error{constructor(e){super(e),this.isSilent=!0,this.name=Ot.errorName}}Ot.errorName="SilentError";const jt=e=>!!e.isSilent;class Lt extends Error{constructor(e){let{message:t="Http Error",httpStatus:r}=e,n=o(e,St);super(t),this.name=Lt.errorName,this.httpStatus=r,Object.assign(this,n)}}Lt.errorName="HttpError";class Tt extends Lt{constructor(e={}){let{message:t="Not Found"}=e,r=o(e,xt);super({message:t,httpStatus:404}),this.name=Tt.errorName,Object.assign(this,r)}}Tt.errorName="NotFoundError";class Mt extends Lt{constructor(e){let{message:t="Redirect Found",nextUrl:r,httpStatus:n=307}=e,s=o(e,kt);super({message:t,httpStatus:n}),this.name=Mt.errorName,this.nextUrl=r,this.httpStatus=n,Object.assign(this,s)}}Mt.errorName="RedirectFoundError";const Vt=e=>e.name===Mt.errorName;class At extends Error{constructor(e={}){let{message:t="Execution Error",cause:r,contextName:n}=e,s=o(e,Ct);super(t),this.name=At.errorName,this.cause=r,this.contextName=n,Object.assign(this,s)}}At.errorName="ExecutionError";class Ft extends Error{constructor(e={}){let{message:t="Execution Abort",contextName:r}=e,n=o(e,Et);super(t),this.name=Ft.errorName,this.contextName=r,Object.assign(this,n)}}Ft.errorName="ExecutionAbortError";class It extends Error{constructor(e={}){let{message:t="Execution Timeout",contextName:r}=e,n=o(e,Rt);super(t),this.name=It.errorName,this.contextName=r,Object.assign(this,n)}}It.errorName="ExecutionTimeoutError";class _t extends Error{constructor(e){let{message:t="Condition failed",conditionName:r,targetName:n}=e,s=o(e,Nt);super(t),this.name=_t.errorName,this.conditionName=r,this.targetName=n,this.isSilent=!0,Object.assign(this,s)}}_t.errorName="ConditionFailError";const Pt={logger:{debug:T(),info:T(),error:T()},resultTransform:e=>1===e.length?e[0]:e};class $t{constructor(e){this.subscribers=new Map;const t=Object.assign({},Pt,e);this.logger=t.logger,this.resultTransform=t.resultTransform}subscribe(e,t){this.logger.debug("subscribe",e,t);let r=this.subscribers.get(e);return r?r.add(t):(r=new Set([t]),this.subscribers.set(e,r)),()=>r.delete(t)}publish(e,...t){this.logger.debug("publish",e,t);const r=this.subscribers.get(e);if(r&&r.size){const e=[];return r.forEach((r=>e.push(Promise.resolve(r(...t))))),Promise.all(e).then(this.resultTransform)}return Promise.resolve()}}var Jt=r(8830),Dt=r.n(Jt),Ut=r(6570),Ht=r.n(Ut),Bt=r(5938),qt=r.n(Bt),Yt=r(9453);const Gt=(0,c.V3)("RENDER_SLOTS",{multi:!0}),Xt=(0,c.V3)("RENDERER_CALLBACK",{multi:!0}),zt=(0,c.V3)("CUSTOM_RENDER"),Wt=(0,c.V3)("resourcesRegistry"),Qt=(0,c.V3)("RENDER_MODE"),Kt=(0,c.V3)("useReactStrictMode"),Zt=(0,c.V3)("EXTEND_RENDER",{multi:!0}),er=(0,c.V3)("defaultLayoutComponent"),tr=(0,c.V3)("defaultHeaderComponent"),rr=(0,c.V3)("defaultFooterComponent"),nr=(0,c.V3)("defaultErrorBoundaryComponent"),or=(0,c.V3)("layoutOptions",{multi:!0}),sr=(0,c.V3)("tramvaiRenderMode");var ir=r(6340);const ar=["additionalBundleList"],cr="__default";class ur{constructor({bundleList:e,componentRegistry:t,actionRegistry:r,dispatcher:o,logger:s}){this.bundles=e,this.componentRegistry=t,this.actionRegistry=r,this.dispatcher=o;{const e=s("file-system-pages:bundle-manager"),t=Object.assign({},Xe.routes,Xe.pages),r=ze(),o=We(),i=(e,t)=>Object.keys(e).reduce(((r,n)=>(r[t(n)]=e[n],r)),{}),a=(0,n.Zv)({name:cr,components:Object.assign({},i(r,Ke),i(o,Ze),t)});this.bundles[cr]=()=>Promise.resolve({default:a});for(const e in a.components)this.componentRegistry.add(e,a.components[e],cr);e.debug({event:"create default bundle with file-system pages",components:Object.keys(t)})}}get(e,t){return Qe(t)&&(e=cr),this.loadBundle(e,t).then((e=>this.resolve(e.default,t)))}has(e,t){return Qe(t)&&(e=cr),!!this.bundles[e]}async resolve(e,t){if(t&&e.components[t]){const r=e.components[t],n=await Ye(r);if(!n)return;"components"in n&&_()(n.components)&&a()(((e,r)=>{this.componentRegistry.add(r,e,t)}),n.components),"actions"in n&&$()(n.actions)&&this.actionRegistry.add(t,n.actions),"reducers"in n&&$()(n.reducers)&&n.reducers.forEach((e=>{this.dispatcher.registerStore(e)}))}return a()(((t,r)=>{this.componentRegistry.add(r,t,e.name)}),e.components),e.actions&&this.actionRegistry.add(e.name,e.actions),e.reducers&&e.reducers.forEach((e=>{this.dispatcher.registerStore(e)})),e}loadBundle(e,t){return this.has(e,t)?this.bundles[e]().catch((t=>Ge(t,this.bundles[e]))):Promise.reject(new Error(`Bundle "${e}" not found`))}}const lr="__default",dr=(0,h.yM)("setRequest"),hr=(0,h.Lq)("requestManager",{}).on(dr,((e,t)=>t)),pr=[(0,c.JJ)({provide:d.Gu,scope:c.sX.REQUEST,useClass:class{constructor({request:e}){this.request=e||{},this.url=window.location.href}getBody(){return this.request.body}getUrl(){return this.url}getParsedUrl(){return this.parsedUrl||(this.parsedUrl=ht(this.url)),this.parsedUrl}getMethod(){return this.request.method}getHeader(e){var t;return null===(t=this.request.headers)||void 0===t?void 0:t[e]}getHeaders(){return this.request.headers}getCookie(e){return this.request.cookies[e]}getCookies(){return this.request.cookies}getClientIp(){var e,t;return this.getHeader("x-real-ip")||(null===(t=null===(e=this.request)||void 0===e?void 0:e.socket)||void 0===t?void 0:t.remoteAddress)||""}getHost(){return window.location.host}},deps:{request:st}}),(0,c.JJ)({provide:d.Ym,multi:!0,useValue:hr})];let fr=class{};fr=(0,s.gn)([(0,c.Yl)({providers:[...pr,(0,c.JJ)({provide:st,useFactory:({store:e})=>{const t=e.getState(hr);return Object.assign({},t,{headers:Object.assign({},null==t?void 0:t.headers,{"user-agent":navigator.userAgent,cookie:document.cookie})})},deps:{store:d.kR}})]})],fr);const gr=[(0,c.JJ)({provide:d.rX,scope:c.sX.REQUEST,useClass:class{constructor(){this.body="",this.headers={},this.cookies={},this.status=200}getBody(){return this.body}setBody(e){this.body=e}getHeader(e){return"set-cookie"===e?yt()(this.cookies):this.headers[e]}getHeaders(){return mt()(this.cookies)?this.headers:Object.assign({},this.headers,{"Set-Cookie":yt()(this.cookies)})}setHeader(e,t){this.headers[e]=t}getCookie(e){return this.cookies[e]}getCookies(){return this.cookies}setCookie(e,t){this.cookies[e]=t}setStatus(e){this.status=e}getStatus(){return this.status}}})];let mr=class{};mr=(0,s.gn)([(0,c.Yl)({providers:[...gr,(0,c.JJ)({provide:it,useValue:{}})]})],mr);class vr{constructor({di:e,dispatcherContext:t,pubsub:r,store:n}){this.executeAction=(e,t)=>this.di.get(d.R$).run(e,t),this.dispatch=(e,t)=>new Promise(((r,n)=>{try{r(this.store.dispatch((0,h.j$)(e,t)))}catch(e){n(e)}})),this.dispatchWith=(e,t)=>"function"==typeof e?(...r)=>this.dispatch(e(...r),t):t=>this.dispatch(e,t),this.getStore=e=>this.dispatcher.getStore(e),this.dehydrate=()=>({dispatcher:this.dispatcher.dehydrate()}),this.getState=(...e)=>this.store.getState(e[0]),this.subscribe=(...e)=>this.store.subscribe(e[0],e[1]),this.hasStore=e=>this.dispatcher.hasStore(e),this.registerStore=e=>this.dispatcher.registerStore(e),this.unregisterStore=e=>this.dispatcher.unregisterStore(e),this.store=n,this.dispatcher=t,this.dispatcher.setContext(this),this.di=e,this.pubsub=r}}const yr={init:[u.Bi.init,u.Bi.listen],close:[u.Bi.close],customer:[u.Bi.customerStart,u.Bi.resolveUserDeps,u.Bi.resolvePageDeps,u.Bi.generatePage,u.Bi.clear],spa:[u.Bi.resolveUserDeps,u.Bi.resolvePageDeps,u.Bi.spaTransition],afterSpa:[u.Bi.afterSpaTransition]},br={server:yr,client:yr};let wr=class{};wr=(0,s.gn)([(0,c.Yl)({providers:[(0,c.JJ)({provide:u.S9,scope:c.sX.SINGLETON,useClass:class{constructor({lines:e,rootDi:t,logger:r,executionContextManager:n,executionEndHandlers:o}){this.executionContextByDi=new WeakMap,this.abortControllerByDi=new WeakMap,this.lines=e,this.rootDi=t,this.log=r("command:command-line-runner"),this.executionContextManager=n,this.executionEndHandlers=o}run(e,t,r,n){const o=null!=n?n:((e,t,r,n)=>{let o=r;return"customer"===t&&"client"!==e&&(o=(0,c.HC)(o)),n&&n.forEach((e=>o.register(e))),o})(e,t,this.rootDi,r),s=o.get({token:d.mj,optional:!0});this.log.debug({event:"command-run",type:e,status:t});const i={};return o.register({provide:bt,useValue:i}),this.lines[e][t].reduce(((e,t)=>e.then((()=>{const e=t.toString();return i[e]={start:performance.now()},Promise.resolve().then((()=>this.executionContextManager.withContext(s,`command-line:${e}`,(async(e,r)=>{this.executionContextByDi.set(o,e),this.abortControllerByDi.set(o,r),await this.createLineChain(o,t)})))).finally((()=>{i[e].end=performance.now()}))}))),Promise.resolve()).finally((()=>{if(this.executionContextByDi.delete(o),this.abortControllerByDi.delete(o),this.executionEndHandlers)for(const r of this.executionEndHandlers)r(o,e,t,i)})).then((()=>o))}resolveExecutionContextFromDi(e){var t;return null!==(t=this.executionContextByDi.get(e))&&void 0!==t?t:null}createLineChain(e,t){let r;try{if(r=e.get({token:t,optional:!0}),null===r)return Promise.resolve()}catch(t){return this.log.error(t),this.throwError(t,e)}return Array.isArray(r)?Promise.all(r.map((r=>this.instanceExecute(r,t,e)))):this.instanceExecute(r,t,e)}instanceExecute(e,t,r){if(!(e instanceof Function)){const r=new TypeError(`Expected function in line processing "commandLineListTokens.${t.toString()}", received "${e}".\n      Check that all commandLineListTokens subscribers return functions`);return void this.log.error({event:"line-error",error:r,line:t.toString()})}const{name:n=""}=e;return this.log.debug({event:"line-run",line:t.toString(),command:n}),Promise.resolve().then((()=>e())).catch((e=>{var o;this.log[jt(e)?"debug":"error"]({event:"line-error",error:e,line:t.toString(),command:n}),null===(o=this.abortControllerByDi.get(r))||void 0===o||o.abort(),this.throwError(e,r)}))}throwError(e,t){throw"object"==typeof e&&(e.di=t),e}},deps:{lines:u.PR,rootDi:c.ZF,logger:d.Fp,executionContextManager:d.vV,executionEndHandlers:{token:wt,optional:!0}}}),(0,c.JJ)({provide:d.p7,useFactory:({di:e,commandLineRunner:t})=>()=>t.resolveExecutionContextFromDi(e),deps:{di:c.ZF,commandLineRunner:u.S9}}),(0,c.JJ)({provide:u.PR,scope:c.sX.SINGLETON,useValue:br})]})],wr);let Sr=class{};Sr=(0,s.gn)([(0,c.Yl)({providers:[(0,c.JJ)({provide:d.eP,scope:c.sX.SINGLETON,useFactory:e=>()=>new $t({logger:e.logger("pubsub")}),deps:{logger:d.Fp}}),(0,c.JJ)({provide:d.k3,scope:c.sX.REQUEST,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:d.eP}}),(0,c.JJ)({provide:d.Tm,scope:c.sX.SINGLETON,useFactory:({createPubsub:e})=>e(),deps:{createPubsub:d.eP}})]})],Sr);const xr=[(0,c.JJ)({provide:d.E6,useFactory:()=>{var e,t;return JSON.parse(null!==(t=null===(e=document.getElementById("__TRAMVAI_STATE__"))||void 0===e?void 0:e.textContent)&&void 0!==t?t:"{}")},scope:c.sX.REQUEST}),(0,c.JJ)({provide:u.Bi.listen,useFactory:({commandLineRunner:e})=>function(){return e.run("client","customer")},deps:{commandLineRunner:u.S9},multi:!0})],kr=(0,h.yM)("action state execution in server"),Cr=(0,h.Lq)("actionTramvai",{serverState:{}}).on(kr,((e,t)=>Object.assign({},e,{serverState:t}))),Er="global",Rr={};class Nr{constructor(e,t,r,n,o){var s;this.globalConditionals=e,this.payload=t,this.parameters=r,this.executionState=n,this.type=o,this.status=!0,this.forbiddenMarker=!1,this.key=null,o===Er&&(this.status="success"!==n.status),this.conditions=null!==(s=r.conditions)&&void 0!==s?s:Rr}check(){return this.globalConditionals.forEach((e=>{this.key=e.key,e.fn(this)})),this.getStatus()}setState(e){this.executionState.state[this.key]=e}getState(){return this.executionState.state[this.key]}forbid(){this.executionState.status="forbidden",this.executionState.forbiddenBy=this.key,this.forbiddenMarker=!0}allow(){this.status=!0}getStatus(){return!this.forbiddenMarker&&this.status}}const Or={},jr={},Lr="@@global",Tr={key:"pageServer",fn:e=>{e.conditions.pageServer&&e.type===Er&&e.forbid()}},Mr=(0,c.V3)("limitActionGlobalTimeRun");let Vr=class{};Vr=(0,s.gn)([(0,c.Yl)({providers:[(0,c.JJ)({provide:d.Ym,multi:!0,useValue:Cr}),(0,c.JJ)({provide:d.R9,scope:c.sX.SINGLETON,useClass:class{constructor({actionsList:e}){this.actions=new Map([[Lr,ot()(e)]])}add(e,t){const r=j()(t);this.actions.set(e,pe()(this.actions.has(e)?[...this.actions.get(e),...r]:r))}get(e,t){return pe()([...this.actions.get(e)||[],...t||[]])}getGlobal(){return this.actions.get(Lr)}remove(e,t){if(!t)return void this.actions.delete(e);const r=j()(t);this.actions.has(e)&&this.actions.set(e,Ht()(this.actions.get(e),r))}},deps:{actionsList:u.I7}}),(0,c.JJ)({provide:d.R$,scope:c.sX.REQUEST,useClass:class{constructor({store:e,context:t,di:r,executionContextManager:n,actionConditionals:o,transformAction:s}){this.actionConditionals=ot()(null!=o?o:[]),this.context=t,this.store=e,this.di=r,this.executionContextManager=n,this.execution=new Map,this.transformAction=s||Dt();const i=e.getState(Cr);i&&i.serverState&&we()(((e,t)=>{this.execution.set(t,e)}),i.serverState)}async runInContext(e,t,...r){var o,s;let i;const a=null!==(o=r[0])&&void 0!==o?o:jr,c=!0===(null==e?void 0:e.values.pageActions)?Er:"local";(0,n.JC)(t)?i=t:(this.transformAction(t),i=(e=>e[l])(t));const u=this.getExecutionState(i.name);return this.canExecuteAction(a,i,u,c)?(u.status="pending",this.executionContextManager.withContext(e,{name:i.name,values:!0===(null==e?void 0:e.values.pageActions)?{pageActions:!1}:void 0},((o,s)=>{const c=this.createActionContext(e,o,s,i);return Promise.resolve().then((()=>(0,n.JC)(t)?t.fn.apply(c,r):t(this.context,a,c.deps))).then((e=>(u.status="success",e))).catch((e=>{throw u.status="failed",e}))}))):"reject"===i.conditionsFailResult?Promise.reject(new _t({conditionName:null!==(s=u.forbiddenBy)&&void 0!==s?s:"unknown",targetName:i.name})):Promise.resolve()}async run(e,...t){return this.runInContext(null,e,...t)}getExecutionState(e){let t=this.execution.get(e);return t||(t={status:"pending",state:{}},this.execution.set(e,t)),t}canExecuteAction(e,t,r,n){return new Nr(this.actionConditionals,e,t,r,n).check()}createActionContext(e,t,r,n){return{abortController:r,abortSignal:null==t?void 0:t.abortSignal,executeAction:this.runInContext.bind(this,t),deps:n.deps?this.di.getOfDeps(n.deps):Or,actionType:(null==e?void 0:e.values.pageActions)?"page":"standalone",dispatch:this.store.dispatch,getState:this.store.getState}}},deps:{actionConditionals:{token:d.xW,optional:!0},context:d.l6,store:d.kR,di:c.ZF,executionContextManager:d.vV,transformAction:{token:"actionTransformAction",optional:!0}}}),(0,c.JJ)({provide:d.FM,scope:c.sX.REQUEST,useClass:class{constructor(e){this.deps=e,this.log=e.logger("action:action-page-runner")}runActions(e,t=(()=>!1)){return this.deps.executionContextManager.withContext(this.deps.commandLineExecutionContext(),{name:"pageActions",values:{pageActions:!0}},(async r=>{await Promise.all(e.map((e=>Promise.resolve().then((()=>this.deps.actionExecution.runInContext(r,e))).catch((r=>{if(!jt(r)){const t=(0,n.JC)(e)?e:e[l];this.log.error({error:r,event:"action-execution-error",message:`${t.name} execution error`})}if(t(r))throw r})))))}))}},deps:{actionExecution:d.R$,executionContextManager:d.vV,commandLineExecutionContext:d.p7,store:d.kR,limitTime:Mr,logger:d.Fp}}),(0,c.JJ)({provide:Mr,useValue:500}),(0,c.JJ)({provide:d.xW,multi:!0,useValue:[{key:"alwaysCondition",fn:e=>{e.conditions.always&&e.allow()}},{key:"onlyServer",fn:e=>{e.conditions.onlyServer&&e.forbid()}},{key:"onlyBrowser",fn:e=>{e.conditions.onlyBrowser}},Tr,{key:"pageBrowser",fn:e=>{e.conditions.pageBrowser&&e.type}}]})]})],Vr);let Ar=class{};Ar=(0,s.gn)([(0,c.Yl)({providers:[(0,c.JJ)({provide:d.qb,scope:c.sX.SINGLETON,useFactory:({stores:e})=>(0,h.pD)({stores:e&&ot()(e)}),deps:{stores:{token:d.Ym,optional:!0}}}),(0,c.JJ)({provide:d.jm,scope:c.sX.REQUEST,useFactory:({dispatcher:e,initialState:t,middlewares:r})=>e.createContext({},t,[h.$J.middleware(),...ot()(r||[])]),deps:{dispatcher:d.qb,middlewares:{token:d.PU,optional:!0},initialState:{token:d.E6,optional:!0}}}),(0,c.JJ)({provide:d.kR,scope:c.sX.REQUEST,useFactory:({dispatcherContext:e})=>({getState:e.getState.bind(e),dispatch:e.dispatch.bind(e),subscribe:e.subscribe.bind(e)}),deps:{dispatcherContext:d.jm}})]})],Ar);const Fr=(e,t={max:100})=>new(qt())(t),Ir=(0,c.V3)("_cachesList");let _r=class{};_r=(0,s.gn)([(0,c.Yl)({providers:[{provide:Ir,scope:c.sX.SINGLETON,useValue:[]},{provide:d.xC,useFactory:({caches:e,isChildDi:t})=>t?Fr:(t,...r)=>{const n=Fr(t,...r);return e.push(n),n},deps:{caches:Ir,isChildDi:{token:c.wG,optional:!0}}},{provide:d.oK,scope:c.sX.SINGLETON,useFactory:({caches:e,cachesClear:t})=>r=>(e.forEach((e=>e.clear())),t?Promise.all(t.map((e=>e(r)))):Promise.resolve()),deps:{caches:Ir,cachesClear:{token:d.TZ,optional:!0}}}]})],_r);const Pr={};let $r=class{};$r=(0,s.gn)([(0,c.Yl)({imports:[wr,g,Sr,de,E,Vr,Ar,fr,mr,_r],providers:[(0,c.JJ)({provide:d.vy,scope:c.sX.SINGLETON,useClass:class{constructor(){this.hooks=Object.create(null)}registerHooks(e,t){this.hooks[e]||(this.hooks[e]=[]),this.hooks[e]=pe()(this.hooks[e].concat(t))}runHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;let s=r;for(let e=0;e<o.length;e++)s=o[e](t,s,n);return s}runAsyncHooks(e,t,r,n){const o=this.hooks[e];if(!o)return r;for(let e=0;e<o.length;e++){const s=o[e];setTimeout((()=>{s(t,r,n)}))}return r}runPromiseHooks(e,t,r){const n=this.hooks[e];return e=>{if(!n)return Promise.resolve(e);let o=0;return Promise.resolve(e).then((function e(s){const i=n[o++];return i?Promise.resolve(i(t,s,r)).then(e):s}))}}}}),(0,c.JJ)({provide:d.KI,scope:c.sX.SINGLETON,useClass:class{constructor({componentList:e}={}){this.components={[lr]:Object.assign({},...ot()(null!=e?e:[]))}}add(e,t,r=lr){const n=this.components[r]||{};n[e]=t,this.components[r]=n}get(e,t=lr){return(this.components[t]||{})[e]||this.components[lr][e]}getComponentParam(e,t,r,n){return rt()([e],t,this.get(r,n))}},deps:{componentList:{token:"componentDefaultList",optional:!0}}}),(0,c.JJ)({provide:d.gE,scope:c.sX.SINGLETON,useFactory:e=>{let{additionalBundleList:t}=e,r=o(e,ar);return null==t||t.forEach((e=>{a()(((e,t)=>{t in r.bundleList||(r.bundleList[t]=()=>Promise.resolve({default:e}))}),e)})),new ur(r)},deps:{bundleList:u.om,additionalBundleList:{token:d.xj,optional:!0},componentRegistry:d.KI,actionRegistry:d.R9,dispatcher:d.qb,logger:d.Fp}}),(0,c.JJ)({provide:d.l6,scope:c.sX.REQUEST,useFactory:function({di:e,dispatcherContext:t,pubsub:r,store:n}){return new vr({di:e,dispatcherContext:t,pubsub:r,store:n})},deps:{di:c.ZF,pubsub:d.k3,dispatcherContext:d.jm,store:d.kR}}),(0,c.JJ)({provide:d.vV,useClass:class{async withContext(e,t,r){const n=(e=>"string"==typeof e?{name:e}:e)(t),{name:o,values:s=Pr}=n,i=e?`${e.name}.${o}`:o;if(null==e?void 0:e.abortSignal.aborted)throw new Ft({message:`Execution aborted in context "${i}"`,contextName:i});const a=new Yt.H;let c,u=s;e&&(u=Object.assign({},e.values,s),c=()=>{a.abort()},e.abortSignal.addEventListener("abort",c));const l={name:i,abortSignal:a.signal,values:u};try{return await r(l,a)}catch(e){throw"object"!=typeof e||e.executionContextName||(e.executionContextName=l.name),e}finally{c&&e&&e.abortSignal.removeEventListener("abort",c)}}}}),...xr]})],$r);const Jr=[(0,c.JJ)({provide:d.E6,useFactory:({commonState:e,config:t})=>e[`${t.key}`],deps:{commonState:ir.FE,config:ir.iO}})],Dr=[(0,c.JJ)({provide:ir.E,multi:!0,useValue:[d.qb,d.kR,d.l6]})],Ur={customer:[ir.Bi.customerStart,ir.Bi.resolveUserDeps,ir.Bi.resolvePageDeps],clear:[ir.Bi.clear],spa:[ir.Bi.resolveUserDeps,ir.Bi.resolvePageDeps,ir.Bi.spaTransition],afterSpa:[ir.Bi.afterSpaTransition]},Hr={server:Ur,client:Ur},Br=[(0,c.JJ)({provide:ir.E,multi:!0,useValue:u.S9}),(0,c.JJ)({provide:u.PR,scope:c.sX.SINGLETON,useValue:Hr})],qr=[(0,c.JJ)({provide:ir.E,multi:!0,useValue:[d.R$,d.FM]}),(0,c.JJ)({provide:d.Ym,multi:!0,useValue:Cr})];let Yr=class{};Yr=(0,s.gn)([(0,c.Yl)({providers:[...Jr,...Dr,...Br,...qr,(0,c.JJ)({provide:Zt,multi:!0,useFactory:({context:e})=>{const t=e.getState();return r=>(0,me.jsx)(h.zt,{context:e,serverState:t,children:r})},deps:{context:d.l6}})]})],Yr);var Gr=r(9266),Xr=r.n(Gr),zr=r(8202),Wr=r.n(zr),Qr=r(9955),Kr=r.n(Qr),Zr=r(4073),en=r(7155);const tn=/\*/,rn=/<history-fallback>/,nn=/([^(?]+)(?:\((.+)\))?(\?)?/,on=(e,t=!1)=>{const r=e.endsWith("/");return t?r||(e=>/\/.+\.[^/]+$/.test(e))(e)?e:`${e}/`:e.length>1&&r?e.slice(0,-1):e},sn=e=>!e.host||e.host===window.location.host,an=e=>"string"==typeof e?{url:e}:e,cn=(e,t)=>(e.add(t),()=>{e.delete(t)}),un=e=>e.split("/").slice(e.startsWith("/")?1:0,e.endsWith("/")?-1:1/0),ln=e=>rn.test(e),dn=e=>tn.test(e),hn=e=>e.includes(":"),pn=e=>ln(e)?{type:1}:dn(e)?{type:2}:hn(e)?(e=>{const[t="",r,n=""]=e.split(":"),o=nn.exec(r);if(!o)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,s,i,a]=o;return{type:3,paramName:s,regexp:t||n||i?new RegExp(`^${t}(${i||".+"})${a?"?":""}${n}$`):void 0,optional:!!a&&!t&&!n}})(e):{type:0,value:e},fn=(e,t)=>{const r=un(e),n=Xr()((r=>{var n;if(ln(r)||dn(r))throw new Error(`Pathname should be only a string with dynamic parameters, not a special string, got ${e}`);if(hn(r)){const[e="",o="",s=""]=r.split(":"),i=nn.exec(o);if(!i)throw new Error('parameters should satisfy pattern "prefix:paramName(regexp)\\?:postfix"');const[,a,c,u]=i,l=null===(n=t[a])||void 0===n?void 0:n.toString();if(u&&!l)return"";if(!l)throw new Error(`value for parameter for ${a} should be defined in params`);if(c&&!new RegExp(c).test(l))throw new Error(`passed parameter for ${a} should satisfy regxep: ${c}, got: ${l}`);return e+l+s||r}return r}),r).join("/");return on(`/${n}`,e.endsWith("/"))};let gn={trace:T(),debug:T(),info:T(),warn:T(),error:T()};class mn{constructor({trailingSlash:e,mergeSlashes:t,beforeResolve:r=[],beforeNavigate:n=[],afterNavigate:o=[],beforeUpdateCurrent:s=[],afterUpdateCurrent:i=[],guards:a=[],onChange:c=[],onRedirect:u,onNotFound:l,onBlock:d}){this.started=!1,this.trailingSlash=!1,this.strictTrailingSlash=!0,this.mergeSlashes=!1,this.trailingSlash=null!=e&&e,this.strictTrailingSlash=void 0===e,this.mergeSlashes=null!=t&&t,this.hooks=new Map([["beforeResolve",new Set(r)],["beforeNavigate",new Set(n)],["afterNavigate",new Set(o)],["beforeUpdateCurrent",new Set(s)],["afterUpdateCurrent",new Set(i)]]),this.guards=new Set(a),this.syncHooks=new Map([["change",new Set(c)]]),this.onRedirect=u,this.onNotFound=l,this.onBlock=d}async start(){gn.debug({event:"start"}),this.started=!0}getCurrentRoute(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.to)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.to}getCurrentUrl(){var e,t,r;return null!==(t=null===(e=this.currentNavigation)||void 0===e?void 0:e.url)&&void 0!==t?t:null===(r=this.lastNavigation)||void 0===r?void 0:r.url}getLastRoute(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.to}getLastUrl(){var e;return null===(e=this.lastNavigation)||void 0===e?void 0:e.url}commitNavigation(e){gn.debug({event:"commit-navigation",navigation:e}),e.history||this.history.save(e),this.lastNavigation=e,this.currentNavigation=null,this.runSyncHooks("change",e)}async updateCurrentRoute(e){return this.internalUpdateCurrentRoute(e,{})}async internalUpdateCurrentRoute(e,{history:t}){var r;const n=null!==(r=this.currentNavigation)&&void 0!==r?r:this.lastNavigation;if(!n)throw new Error("updateCurrentRoute should only be called after navigate to some route");const{replace:o,params:s,navigateState:i}=e,{to:a,url:c}=n,u={type:"updateCurrentRoute",from:a,to:this.resolveRoute({params:s,navigateState:i},{wildcard:!0}),url:this.resolveUrl(e),fromUrl:c,replace:o,history:t,navigateState:i,code:e.code};gn.debug({event:"update-current-route",updateRouteOptions:e,navigation:u}),await this.run(u)}async runUpdateCurrentRoute(e){await this.runHooks("beforeUpdateCurrent",e),this.commitNavigation(e),await this.runHooks("afterUpdateCurrent",e)}async navigate(e){return this.internalNavigate(an(e),{})}async internalNavigate(e,{history:t,redirect:r}){var n;const{url:o,replace:s,params:i,navigateState:a,code:c}=e,u=r?this.lastNavigation:null!==(n=this.currentNavigation)&&void 0!==n?n:this.lastNavigation;if(!o&&!u)throw new Error("Navigate url should be specified and cannot be omitted for first navigation");const l=this.resolveUrl(e),{to:d,url:h}=null!=u?u:{};let p={type:"navigate",from:d,url:l,fromUrl:h,replace:s,history:t,navigateState:a,code:c,redirect:r,redirectFrom:r?this.currentNavigation.to:void 0};await this.runHooks("beforeResolve",p);const f=this.resolveRoute({url:l,params:i,navigateState:a},{wildcard:!0});if(f&&(p=Object.assign({},p,{to:f})),gn.debug({event:"navigation",navigation:p}),!p.to)return this.notfound(p);await this.run(p)}async runNavigate(e){if(e.to.redirect)return this.redirect(e,an(e.to.redirect));await this.runGuards(e),await this.runHooks("beforeNavigate",e),this.commitNavigation(e),await this.runHooks("afterNavigate",e)}async run(e){this.currentNavigation=e,"navigate"===e.type&&await this.runNavigate(e),"updateCurrentRoute"===e.type&&await this.runUpdateCurrentRoute(e)}resolve(e,t){const r="string"==typeof e?{url:e}:e;return this.resolveRoute(Object.assign({},r,{url:ht(r.url)}),t)}back(e){return this.go(-1,e)}forward(){return this.go(1)}async go(e,t){return gn.debug({event:"history.go",to:e}),this.history.go(e,t)}isNavigating(){return!!this.currentNavigation}async dehydrate(){throw new Error("Not implemented")}async rehydrate(e){throw new Error("Not implemented")}addRoute(e){var t;null===(t=this.tree)||void 0===t||t.addRoute(e)}async redirect(e,t){var r;return gn.debug({event:"redirect",navigation:e,target:t}),null===(r=this.onRedirect)||void 0===r?void 0:r.call(this,Object.assign({},e,{from:e.to,fromUrl:e.url,to:null,url:this.resolveUrl(t)}))}async notfound(e){var t;return gn.debug({event:"not-found",navigation:e}),null===(t=this.onNotFound)||void 0===t?void 0:t.call(this,e)}async block(e){if(gn.debug({event:"blocked",navigation:e}),this.currentNavigation=null,this.onBlock)return this.onBlock(e);throw new Error("Navigation blocked")}normalizePathname(e){let t=e;return this.mergeSlashes&&(t=(e=>{const[t,...r]=e.split("?");return[t.replace(/\/+/g,"/").replace(/^(\w+):\//,"$1://"),...r].join("?")})(t)),this.strictTrailingSlash||(t=on(t,this.trailingSlash)),t}resolveUrl({url:e,query:t={},params:r,preserveQuery:n,hash:s}){var i;const a=this.getCurrentRoute(),c=this.getCurrentUrl(),u=e?((e,t)=>{const r=dt(e.toString());return dt(t,r)})(null!==(i=null==c?void 0:c.href)&&void 0!==i?i:"",e):dt(c.href);let{pathname:l}=u;return r&&(e?l=fn(u.pathname,r):a&&(l=fn(a.path,Object.assign({},a.params,r)))),sn(u)&&(l=this.normalizePathname(l)),lt(((e,t)=>{const{path:r,query:n,port:s,username:i,password:a}=t,c=o(t,ct);if(r){const t=(e=>{const t=pt.exec(e);if(t){const[e,r,n="",o=""]=t;return{pathname:r,search:n,hash:o}}})(r);t&&Object.assign(e,t)}if(i&&(e.username=i),a&&(e.password=a),Object.assign(e,c),void 0!==s&&(e.port=s,"0"===e.port&&(e.port="http:"===e.protocol?"80":"443")),n){const r=new URLSearchParams(t.search);ft(r,n),e.search=r.toString()}return e})(u,{pathname:l,search:e?u.search:"",query:Object.assign({},n?this.getCurrentUrl().query:{},t),hash:null!=s?s:u.hash}))}resolveRoute({url:e,params:t,navigateState:r},{wildcard:n}={}){var o,s;let i=e?null===(o=this.tree)||void 0===o?void 0:o.getRoute(e.pathname):this.getCurrentRoute();if(n&&!i&&e&&(i=null===(s=this.tree)||void 0===s?void 0:s.getWildcard(e.pathname)),i)return t||r!==i.navigateState?Object.assign({},i,{params:Object.assign({},i.params,t),navigateState:r}):i}async runGuards(e){if(gn.debug({event:"guards.run",navigation:e}),!this.guards)return void gn.debug({event:"guards.empty",navigation:e});const t=await Promise.all(Array.from(this.guards).map((t=>Promise.resolve(t(e)).catch((e=>{gn.warn({event:"guard.error",error:e})})))));gn.debug({event:"guards.done",navigation:e,results:t});for(const r of t){if(!1===r)return this.block(e);if(F()(r)||_()(r))return this.redirect(e,an(r))}}registerGuard(e){return cn(this.guards,e)}runSyncHooks(e,t){gn.debug({event:"sync-hooks.run",hookName:e,navigation:t});const r=this.syncHooks.get(e);if(r){for(const e of r)try{e(t)}catch(e){gn.warn({event:"sync-hooks.error",error:e})}gn.debug({event:"sync-hooks.done",hookName:e,navigation:t})}else gn.debug({event:"sync-hooks.empty",hookName:e,navigation:t})}registerSyncHook(e,t){return cn(this.syncHooks.get(e),t)}async runHooks(e,t){gn.debug({event:"hooks.run",hookName:e,navigation:t});const r=this.hooks.get(e);r?(await Promise.all(Array.from(r).map((r=>Promise.resolve(r(t)).catch((t=>{if(gn.warn({event:"hook.error",error:t}),"beforeResolve"===e)throw t}))))),gn.debug({event:"hooks.done",hookName:e,navigation:t})):gn.debug({event:"hooks.empty",hookName:e,navigation:t})}registerHook(e,t){return cn(this.hooks.get(e),t)}}class vn{init(e){}listen(e){this.listener=e}setTree(e){this.tree=e}}const yn=window.history&&window.history.pushState,bn=e=>e&&"string"==typeof e.key,wn=(e,t)=>{const r=(e=>{const{to:t}=e;if(t)return`${t.name}_${t.path}`})(e);let{type:n}=e;return e.replace&&t&&(n=t.type===n?n:"navigate"),{key:r,type:n,navigateState:e.navigateState}};class Sn extends vn{constructor(){super(),this.currentIndex=0,this.historyWrapper=(({onNavigate:e})=>{if(!yn){const e=(e,t,r)=>{window.location.href=r.toString()};return window.history.pushState=e,window.history.replaceState=e,{navigate:({path:t})=>e({},"",t),history:()=>{throw new Error("Method not implemented")},init:T(),subscribe:T()}}let t=window.history;"__originalHistory"in window.history?t=window.history.__originalHistory:window.history.__originalHistory={pushState:t.pushState.bind(window.history),replaceState:t.replaceState.bind(window.history),go:t.go.bind(window.history)};const r=t.pushState.bind(window.history),n=t.replaceState.bind(window.history),o=t.go.bind(window.history),s=e=>{o(e)},i=(t=!1)=>(r,n,o)=>{e({url:o.toString(),replace:t,navigateState:r})};return window.history.pushState=i(!1),window.history.replaceState=i(!0),window.history.go=s,window.history.back=()=>s(-1),window.history.forward=()=>s(1),{navigate:({path:e,replace:t,state:o})=>{t?n(o,"",e):r(o,"",e)},history:s,init:e=>{n(e,"")},subscribe:e=>{window.addEventListener("popstate",(({state:t})=>{e({path:window.location.pathname+window.location.search+window.location.hash,state:t})}))}}})({onNavigate:({url:e,replace:t,navigateState:r})=>{this.listener({url:e,replace:t,navigateState:r})}})}init(e){var t;this.currentState=bn(null===(t=window.history)||void 0===t?void 0:t.state)?window.history.state:wn(e),this.historyWrapper.init(this.currentState),this.historyWrapper.subscribe((async({path:e,state:t})=>{var r,n;try{let n,o;if(bn(t)){const{key:e,type:r}=this.currentState,{key:s,type:i}=t;this.currentState=t,o=t.navigateState,n=s!==e||"updateCurrentRoute"!==i&&"updateCurrentRoute"!==r?"navigate":"updateCurrentRoute"}else this.currentIndex=0;await this.listener({type:n,history:!0,url:e,navigateState:o}),null===(r=this.goPromiseResolve)||void 0===r||r.call(this)}catch(e){null===(n=this.goPromiseReject)||void 0===n||n.call(this,e)}}))}save(e){const{replace:t,url:r}=e;t||this.currentIndex++,this.currentState=wn(e,this.currentState),this.historyWrapper.navigate({path:r.path,replace:t,state:this.currentState})}go(e,t){var r;if(this.currentIndex+e<0){if(null==t?void 0:t.historyFallback)return this.listener({url:t.historyFallback,type:"navigate",history:!1});const e=null===(r=this.tree)||void 0===r?void 0:r.getHistoryFallback(window.location.pathname);if(e)return this.listener({url:e.actualPath,type:"navigate",history:!1})}const n=new Promise(((e,t)=>{this.goPromiseResolve=e,this.goPromiseReject=t}));return this.historyWrapper.history(e),n}}class xn extends mn{constructor(e){super(e),this.history=new Sn,this.history.listen((async({type:e,url:t,navigateState:r,replace:n,history:o})=>{var s;const i=this.getCurrentUrl(),{pathname:a,query:c}=this.resolveUrl({url:t}),u=i.pathname===a;if("updateCurrentRoute"===e||!e&&u){const e=null===(s=this.tree)||void 0===s?void 0:s.getRoute(a);await this.internalUpdateCurrentRoute({params:null==e?void 0:e.params,query:c,replace:n,navigateState:r},{history:o})}else await this.internalNavigate({url:t,replace:n,navigateState:r},{history:o})}))}async rehydrate(e){gn.debug({event:"rehydrate",navigation:e});const t=ht(window.location.href);this.currentNavigation=Object.assign({},e,{type:"navigate",url:t}),this.lastNavigation=this.currentNavigation,await this.runGuards(this.currentNavigation),this.history.init(this.currentNavigation),this.currentNavigation=null,e.to&&this.addRoute({name:e.to.name,path:e.to.path,config:e.to.config,alias:t.pathname})}resolveRoute(...e){const{url:t}=e[0];if(!t||sn(t))return super.resolveRoute(...e)}async notfound(e){var t,r;await super.notfound(e);const n=null!==(r=null===(t=e.fromUrl)||void 0===t?void 0:t.href)&&void 0!==r?r:window.location.href,o=e.url.href;return(e.from&&!e.to||n!==o)&&(e.replace?window.location.replace(o):window.location.assign(o)),new Promise((()=>{}))}async block(e){return this.notfound(e)}async redirect(e,t){return await super.redirect(e,t),this.internalNavigate(Object.assign({},t,{replace:t.replace||e.replace}),{redirect:!0})}}const kn=e=>({route:e,children:Object.create(null),parameters:[]}),Cn=(e,t,r)=>Object.assign({},e,{actualPath:t,params:null!=r?r:{}});class En{constructor(e){this.tree=kn(),oe()((e=>this.addRoute(e)),e)}addRoute(e){const t=un(e.path);let r=this.tree;for(let n=0;n<t.length;n++){const o=t[n],s=pn(o);if(1===s.type)return void(r.historyFallbackRoute=e);if(2===s.type)return void(r.wildcardRoute=e);if(3===s.type){const{paramName:e,regexp:t,optional:n}=s,i=Wr()((e=>e.key===o),r.parameters);if(i)r=i.tree;else{const s={key:o,paramName:e,regexp:t,optional:n,tree:kn()};if(t&&!n){const e=Kr()((e=>!e.regexp),r.parameters);r.parameters.splice(e,0,s)}else r.parameters.push(s);r=s.tree}}else r.children[o]||(r.children[o]=kn()),r=r.children[o]}r.route=e}getRoute(e){return this.findRoute(e,"route")}getWildcard(e){return this.findRoute(e,"wildcardRoute")}getHistoryFallback(e){const t=this.findRoute(e,"historyFallbackRoute");return t&&Object.assign({},t,{actualPath:t.path.replace(rn,"")||"/"})}findRoute(e,t){const r="route"===t,n=un(e),o=[[this.tree,0]];for(;o.length;){const[s,i,a]=o.pop(),{children:c,parameters:u}=s;let l=!1;if(i>=n.length){if(s[t])return Cn(s[t],e,a);l=!0}!r&&s[t]&&o.push([s,n.length,a]);const d=n[i],h=c[d];for(const e of u){const{optional:t,tree:r}=e;t&&o.push([r,i,a])}if(!l){for(let e=u.length-1;e>=0;e--){const t=u[e],{paramName:r,tree:n,regexp:s}=t,c=null==s?void 0:s.exec(d),l=s?null==c?void 0:c[1]:d;l&&o.push([n,i+1,Object.assign({},a,{[r]:l})])}h&&o.push([h,i+1,a])}}}}const Rn=(0,fe.createContext)(null),Nn=(0,fe.createContext)(null),On=(0,fe.createContext)(null),jn=({router:e,serverState:t,children:r})=>{const n=(0,Zr.useSyncExternalStore)((t=>e.registerSyncHook("change",t)),(()=>e.getLastRoute()),t?()=>t.currentRoute:()=>e.getLastRoute()),o=(0,Zr.useSyncExternalStore)((t=>e.registerSyncHook("change",t)),(()=>e.getLastUrl()),t?()=>t.currentUrl:()=>e.getLastUrl());return(0,me.jsx)(Rn.Provider,{value:e,children:(0,me.jsx)(Nn.Provider,{value:n,children:(0,me.jsx)(On.Provider,{value:o,children:r})})})};jn.displayName="Provider";const Ln=(0,c.V3)("router router"),Tn=(0,c.V3)("router routes",{multi:!0}),Mn=(0,c.V3)("router guard",{multi:!0}),Vn=(0,c.V3)("router pageService"),An=(0,c.V3)("router routeResolve"),Fn=(0,c.V3)("router routeTransform",{multi:!0}),In=(0,c.V3)("router spaRunMode"),_n=(0,c.V3)("link prefetch manager");var Pn=r(8379),$n=r.n(Pn),Jn=r(8708),Dn=r.n(Jn);const Un=["spaMode"],Hn=["spaMode"],Bn=(0,h.yM)("SET_CURRENT_ROUTE"),qn=(0,h.yM)("SET_URL_ON_REHYDRATE"),Yn=(0,h.Lq)("router",{currentRoute:null,previousRoute:null,currentUrl:null,previousUrl:null}).on(Bn,((e,{to:t,from:r,url:n,fromUrl:o,replace:s})=>({currentRoute:t,previousRoute:s?e.previousRoute:r,currentUrl:n,previousUrl:s?e.previousUrl:o}))).on(qn,((e,t)=>Object.assign({},e,{currentUrl:t}))),Gn=(0,c.V3)("router routerClassToken"),Xn=(0,c.V3)("router additionalParameters"),zn=(0,c.V3)("router onChangeHooks",{multi:!0}),Wn=(0,c.V3)("router beforeResolveHooks",{multi:!0}),Qn=(0,c.V3)("router beforeNavigateHooks",{multi:!0}),Kn=(0,c.V3)("router afterNavigateHooks",{multi:!0}),Zn=(0,c.V3)("router beforeUpdateCurrentHooks",{multi:!0}),eo=(0,c.V3)("router afterUpdateCurrentHooks",{multi:!0}),to=(0,c.V3)("router finalRouteTransform"),ro=[{provide:Mn,multi:!0,useFactory:({bundleManager:e,logger:t,actionRegistry:r,responseManager:n,dispatcher:o,dispatcherContext:s,pageService:i})=>{const a=t("route:load-bundles");return async({to:t})=>{var c;a.debug({event:"load-bundle",route:t});const{bundle:u,pageComponent:l,nestedLayoutComponent:d}=t.config;if(!e.has(u,l))return a.info({event:"load-bundle-not-found",bundle:u,pageComponent:l}),n.setStatus(404),!1;try{const t=[];t.push(e.get(u,l)),d&&t.push(Ye(i.resolveComponentFromConfig("nestedLayout")));const[n,a]=await Promise.all(t),{components:h,reducers:p}=n,f=h[l];null===(c=null==f?void 0:f.reducers)||void 0===c||c.forEach((e=>s.getStore(e))),null==p||p.forEach((e=>s.getStore(e))),a&&("actions"in a&&$()(a.actions)&&r.add(l,a.actions),"reducers"in a&&$()(a.reducers)&&a.reducers.forEach((e=>{o.registerStore(e),s.getStore(e)})))}catch(e){return a.error({event:"load-bundle-failed",error:e}),!1}}},deps:{logger:d.Fp,bundleManager:d.gE,actionRegistry:d.R9,responseManager:d.rX,dispatcher:d.qb,dispatcherContext:d.jm,pageService:Vn}},{provide:Mn,multi:!0,useFactory:({responseManager:e,logger:t})=>{const r=t("route:guard-check-error");return async()=>{if(e.getStatus()>=500)return r.error({event:"status-is-error",status:e.getStatus()}),!1}},deps:{logger:d.Fp,responseManager:d.rX}}],no=[{provide:zn,multi:!0,useFactory:({context:e})=>t=>{e.dispatch(Bn(t))},deps:{context:d.l6}}],oo=({router:e})=>{const t={currentRoute:e.getCurrentRoute(),currentUrl:e.getCurrentUrl()};return r=>(0,me.jsx)(jn,{router:e,serverState:t,children:r})},so=[{provide:to,useFactory:({transformers:e})=>e&&0!==e.length?$n()(...ot()(e)):Dt(),deps:{transformers:{token:Fn,optional:!0}}},{provide:Fn,multi:!0,useValue:e=>{const t=Object.assign({bundle:"mainDefault",pageComponent:"pageDefault"},e.config);return Object.assign({},e,{config:t})}},{provide:Fn,multi:!0,useValue:e=>Object.assign({},e,{path:Dn()(/\/?$/,"/",e.path)})},{provide:Zt,multi:!0,useFactory:oo,deps:{router:Ln}}],io=[(0,c.JJ)({provide:Tn,multi:!0,useFactory:({logger:e})=>{const t=e("file-system-pages:route"),r=Object.keys(Xe.routes).map(et);return t.debug({event:"create static routes from file-system pages",routes:r}),r},deps:{logger:d.Fp}})].filter(Boolean),ao=[...ro,...no,...so,...io,{provide:Ln,useFactory:({RouterClass:e,routes:t,routeTransform:r,routeResolve:n,additionalParameters:o})=>{const s=new e(Object.assign({},o,{trailingSlash:!0,mergeSlashes:!0,routes:ot()(null!=t?t:[]).map(r)}));return n&&s.registerHook("beforeResolve",(async e=>{if(!s.resolve(e.url.href)){const t=await n(e);t&&s.addRoute(r(t))}})),s},deps:{RouterClass:Gn,additionalParameters:{token:Xn,optional:!0},routes:{token:Tn,optional:!0},routeTransform:to,routeResolve:{token:An,optional:!0}}},{provide:u.Bi.customerStart,multi:!0,useFactory:({router:e,guards:t,onChange:r,beforeResolve:n,beforeNavigate:o,afterNavigate:s,beforeUpdateCurrent:i,afterUpdateCurrent:a})=>function(){ot()(null!=t?t:[]).forEach((t=>e.registerGuard(t))),ot()(null!=r?r:[]).forEach((t=>e.registerSyncHook("change",t))),ot()(null!=n?n:[]).forEach((t=>e.registerHook("beforeResolve",t))),ot()(null!=o?o:[]).forEach((t=>e.registerHook("beforeNavigate",t))),ot()(null!=s?s:[]).forEach((t=>e.registerHook("afterNavigate",t))),ot()(null!=i?i:[]).forEach((t=>e.registerHook("beforeUpdateCurrent",t))),ot()(null!=a?a:[]).forEach((t=>e.registerHook("afterUpdateCurrent",t)))},deps:{router:Ln,guards:{token:Mn,optional:!0},onChange:{token:zn,optional:!0},beforeResolve:{token:Wn,optional:!0},beforeNavigate:{token:Qn,optional:!0},afterNavigate:{token:Kn,optional:!0},beforeUpdateCurrent:{token:Zn,optional:!0},afterUpdateCurrent:{token:eo,optional:!0}}},{provide:u.Bi.init,multi:!0,useFactory:({logger:e})=>function(){var t;t=e("route:router"),gn=t},deps:{logger:d.Fp}},{provide:In,useValue:"after"},(0,c.JJ)({provide:Vn,useClass:class{constructor({router:e,componentRegistry:t}){this.router=e,this.componentRegistry=t}getCurrentRoute(){return this.router.getCurrentRoute()}getCurrentUrl(){return this.router.getCurrentUrl()}getConfig(){var e,t;return null!==(t=null===(e=this.getCurrentRoute())||void 0===e?void 0:e.config)&&void 0!==t?t:{}}getContent(){var e;return null!==(e=this.getConfig().content)&&void 0!==e?e:{}}getMeta(){var e;return null!==(e=this.getConfig().meta)&&void 0!==e?e:{}}navigate(e){return this.router.navigate(e)}updateCurrentRoute(e){return this.router.updateCurrentRoute(e)}back(e){return this.router.back(e)}forward(){return this.router.forward()}go(e,t){return this.router.go(e,t)}addComponent(e,t){const r=this.getComponentsGroupName();return this.componentRegistry.add(e,t,r)}getComponent(e){const t=this.getComponentsGroupName();return this.componentRegistry.get(e,t)}resolveComponentFromConfig(e){var t;const r=`${e}Component`,n=`${e}Default`,o=null!==(t=this.getConfig()[r])&&void 0!==t?t:n;return this.getComponent(o)||this.getComponent(n)}getComponentsGroupName(){const{bundle:e,pageComponent:t}=this.getConfig();return Qe(t)?t:e}},deps:{router:Ln,componentRegistry:d.KI}}),{provide:d.Ym,multi:!0,useValue:Yn}],co=(0,c.V3)(),uo=(0,c.V3)(),lo=[(0,c.JJ)({provide:co,useValue:new Set}),(0,c.JJ)({provide:uo,useFactory:()=>{let e=Promise.resolve();return{add:t=>(e=e.then(t),e)}}}),(0,c.JJ)({provide:_n,useFactory:({router:e,routeTransform:t,routeResolve:r,componentRegistry:n,bundleManager:o,logger:s,prefetchedLinksCache:i,prefetchedLinksQueue:a})=>{const c=s("link-prefetch-manager");return{prefetch:s=>a.add((()=>(async s=>{if(i.has(s))return;i.add(s),c.info({event:"prefetch-route-init",url:s});let a=e.resolve(s);if(!a&&r){const e=((e,t)=>{const r=dt(e.toString());return ft(r.searchParams,{prefetchRoute:"true"}),lt(r)})(s);a=await r({url:e,type:"navigate"}),a&&(a=t(a))}if(!a)return void c.info({event:"prefetch-route-not-found",url:s});const{config:{pageComponent:u,bundle:l,nestedLayoutComponent:d}}=a,h=[];o.has(l,u)&&h.push(o.get(l,u)),d&&h.push(Ye(n.get(d,Qe(u)?"__default":l))),await Promise.all(h).then((()=>{c.info({event:"prefetch-route-success",url:s})})).catch((e=>{c.warn({event:"prefetch-fail",url:s,error:e})}))})(s)))}},deps:{router:Ln,routeTransform:to,routeResolve:{token:An,optional:!0},componentRegistry:d.KI,bundleManager:d.gE,logger:d.Fp,prefetchedLinksCache:co,prefetchedLinksQueue:uo}})],ho=[...lo],po=e=>{if(e.name===Tt.errorName||Vt(e))return!0},fo=({store:e,router:t,actionRegistry:r,actionPageRunner:n})=>function(){const e=t.getCurrentRoute(),{config:{bundle:o,pageComponent:s}={}}=e;if(!o||!s)throw new Error(`bundle and pageComponent should be defined, but got ${e}`);const i=pe()([...r.getGlobal()||[],...r.get(o)||[],...r.get(s)||[]]);return n.runActions(i,po).catch((e=>{if(Vt(e))return t.navigate({url:e.nextUrl,replace:!0,code:e.httpStatus});throw e.error||e}))},go=[...ho,...ao,(0,c.JJ)({provide:u.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>async function(){const r=t.getState(Yn).currentRoute;return e.rehydrate({to:r})},deps:{router:Ln,store:d.kR}}),(0,c.JJ)({provide:u.Bi.clear,multi:!0,useFactory:({router:e,store:t})=>function(){return t.getState().router.currentUrl.href!==window.location.href&&t.dispatch(qn(e.getCurrentUrl())),e.start()},deps:{router:Ln,store:d.kR}}),(0,c.JJ)({provide:u.Bi.clear,multi:!0,useFactory:e=>{const t=e.store.getState(Yn).currentRoute;return"client"===e.renderMode&&(!t||t&&t.actualPath!==window.location.pathname)?T():fo(e)},deps:{store:d.kR,router:Ln,actionRegistry:d.R9,actionPageRunner:d.FM,renderMode:sr}}),(0,c.JJ)({provide:u.Bi.clear,multi:!0,useFactory:({store:e,router:t,renderMode:r})=>async function(){const n=e.getState(Yn).currentRoute;if("client"===r&&(!n||n&&n.actualPath!==window.location.pathname))return t.navigate({url:window.location.href,replace:!0})},deps:{store:d.kR,router:Ln,renderMode:sr}})],mo=e=>(t,r={})=>({mainModule:e,providers:[{provide:Tn,multi:!0,useValue:t},r.spaActionsMode&&{provide:In,useValue:r.spaActionsMode}].filter(Boolean)});var vo;(vo=class{}).forRoot=mo(vo);const yo=[{provide:Qn,multi:!0,useFactory:({commandLineRunner:e,di:t})=>async()=>{await e.run("client","spa",[],t)},deps:{di:c.ZF,commandLineRunner:u.S9}},{provide:Kn,multi:!0,useFactory:({commandLineRunner:e,di:t})=>async()=>{await e.run("client","afterSpa",[],t)},deps:{di:c.ZF,commandLineRunner:u.S9}},{provide:u.Bi.spaTransition,multi:!0,useFactory:e=>{let{spaMode:t}=e,r=o(e,Un);return"after"!==t?fo(r):T()},deps:{store:d.kR,router:Ln,actionRegistry:d.R9,actionPageRunner:d.FM,spaMode:{token:In,optional:!0}}},{provide:u.Bi.afterSpaTransition,multi:!0,useFactory:e=>{let{spaMode:t}=e,r=o(e,Hn);return"after"===t?fo(r):T()},deps:{store:d.kR,router:Ln,actionRegistry:d.R9,actionPageRunner:d.FM,spaMode:{token:In,optional:!0}}}];var bo;const wo=(0,c.Yl)({providers:[...go,...yo,{provide:Gn,useValue:class extends xn{constructor(e){super(e),this.tree=new En(e.routes),this.history.setTree(this.tree)}async rehydrate(e){return this.resolveIfDelayFound(super.rehydrate(e))}async start(){if(await super.start(),this.delayedNavigation){const{delayedNavigation:e}=this;return this.delayedNavigation=null,this.flattenDelayedNavigation(e)}}async run(e){if(this.started)return this.currentNavigation?this.delayNavigation(e):(this.delayedNavigation&&(gn.info({event:"delay-navigation-drop",delayedNavigation:this.delayedNavigation,navigation:e}),this.delayedNavigation=null),this.flattenDelayedNavigation(e));this.delayNavigation(e)}delayNavigation(e){return this.delayedNavigation=e,gn.info({event:"delay-navigation",navigation:e}),this.delayedPromise||(this.delayedPromise=new Promise(((e,t)=>{this.delayedResolve=e,this.delayedReject=t}))),this.delayedPromise}commitNavigation(e){if(!e.cancelled)return super.commitNavigation(e);gn.debug({event:"delay-ignore-commit",navigation:e})}async runGuards(e){if(!e.cancelled)return super.runGuards(e);gn.debug({event:"delay-ignore-guards",navigation:e})}async runHooks(e,t){if(t.cancelled&&this.lastNavigation!==t)gn.debug({event:"delay-ignore-hooks",navigation:t});else try{await super.runHooks(e,t)}catch(e){return this.notfound(t)}}async resolveIfDelayFound(e){let t;const r=setInterval((()=>{var e;this.delayedNavigation&&("navigate"===this.delayedNavigation.type||this.delayedNavigation.type===(null===(e=this.currentNavigation)||void 0===e?void 0:e.type)?(gn.info({event:"delay-navigation-found",navigation:this.delayedNavigation}),this.currentNavigation&&(this.currentNavigation.cancelled=!0,this.currentNavigation=null),t()):this.delayedResolve())}),50);await Promise.race([e,new Promise((e=>{t=e}))]),clearInterval(r),t()}async flattenDelayedNavigation(e){const t=async e=>{if(await this.resolveIfDelayFound(super.run(e)),this.delayedNavigation){const{delayedNavigation:e}=this;return gn.info({event:"delay-navigation-run",navigation:e}),this.delayedNavigation=null,t(e)}};return t(e).then((()=>{var e;null===(e=this.delayedResolve)||void 0===e||e.call(this)}),(e=>{var t;null===(t=this.delayedReject)||void 0===t||t.call(this,e)})).finally((()=>{this.delayedPromise=null,this.delayedResolve=null,this.delayedReject=null}))}}}]})(((bo=class{}).forRoot=mo(bo),bo));let So=class{};So=(0,s.gn)([(0,c.Yl)({providers:[(0,c.JJ)({provide:Zt,multi:!0,useFactory:oo,deps:{router:Ln}}),{provide:ir.zJ,multi:!0,useValue:Yn}]})],So),window.requestIdleCallback,window.cancelIdleCallback;const xo=()=>((0,fe.useContext)(Nn),$e(Vn));var ko=r(5723),Co=r.n(ko);const Eo=["children"],Ro=["header","footer","layout","content","page"],No=e=>Array.isArray(e)?e:[e],Oo=(e,t)=>No(null!=t?t:[]).reduce(((e,t)=>t(e)),e),jo=({children:e})=>e,Lo=e=>{let{children:t}=e;return t(o(e,Eo))},To=(0,h.yM)("setPageError"),Mo=(0,h.Lq)("pageError",null).on(To,((e,t)=>t&&function(e){return Object.assign({},e,{message:e.message,stack:e.stack})}(t))),Vo=e=>{const{children:t}=e,r=$e(Vn),n=(0,fe.useContext)(On),o=(0,h.oR)(Mo),s=(0,fe.useMemo)((()=>o&&function(e){const t=new Error(e.message);return Object.assign(t,e),t}(o)),[o]),i=$e({token:Ue,optional:!0}),a=$e({token:He,optional:!0}),c=r.resolveComponentFromConfig("errorBoundary");return(0,me.jsx)(De,{url:n,error:s,errorHandlers:i,fallback:c,fallbackFromDi:a,children:t})},Ao=({children:e})=>{const t=xo(),r=t.resolveComponentFromConfig("layout"),n=t.resolveComponentFromConfig("header"),o=t.resolveComponentFromConfig("footer");return(0,fe.useMemo)((()=>(0,me.jsx)(r,{Header:n,Footer:o,children:e})),[r,n,o,e])},Fo=({children:e})=>{const t=xo().resolveComponentFromConfig("nestedLayout");return(0,fe.useMemo)((()=>(0,me.jsx)(t,{children:e})),[t,e])},Io=()=>{const e=xo(),{pageComponent:t}=e.getConfig();let r=e.getComponent(t);return r||(r=()=>{throw new Error(`Page component '${t}' not found`)}),(0,fe.useMemo)((()=>(0,me.jsx)(Vo,{children:(0,me.jsx)(r,{})})),[r])},_o=()=>{const e=(0,fe.useMemo)((()=>(0,me.jsx)(Io,{})),[]),t=(0,fe.useMemo)((()=>(0,me.jsx)(Fo,{children:e})),[e]);return(0,me.jsx)(Ao,{children:t})};let Po,$o;try{Po=r(3786).a,$o=r(4121).startTransition}catch(e){}const Jo=({children:e,callback:t})=>((0,en.L)(t,[]),e);const Do=({children:e})=>e;let Uo=class{};Uo=(0,s.gn)([(0,c.Yl)({providers:[{provide:er,useFactory:({layoutOptions:e})=>{var t;return(({components:e={},wrappers:t={}}={})=>{const{header:r=Lo,footer:n=Lo,layout:s=jo,content:i=jo,page:a=jo}=e,c=o(e,Ro),u=Oo(s,t.layout),l=Oo(i,t.content),d=Oo(a,t.page),h=Oo(r,t.header),p=Oo(n,t.footer),f=Object.keys(c).map((e=>({name:e,Component:Oo(c[e],t[e])}))),g=({children:e,Header:t,Footer:r})=>(0,me.jsxs)(u,{children:[f.map((({Component:e,name:t})=>(0,me.jsx)(e,{},t))),(0,me.jsxs)(l,{children:[t?(0,me.jsx)(h,{children:e=>(0,me.jsx)(t,Object.assign({},e))}):null,(0,me.jsx)(d,{children:e}),r?(0,me.jsx)(p,{children:e=>(0,me.jsx)(r,Object.assign({},e))}):null]})]});return g.displayName="Layout",g})((t=e,ot()(null!=t?t:[]).reduce(((e,t)=>{const{components:r,wrappers:n}=e;return t.components&&Object.assign(r,t.components),t.wrappers&&Object.keys(t.wrappers).forEach((e=>{n[e]||(n[e]=[]),n[e].push(...No(t.wrappers[e]))})),e}),{components:{},wrappers:{}})))},deps:{layoutOptions:{token:or,optional:!0}}},{provide:"componentDefaultList",multi:!0,useFactory:e=>Object.assign({},e,{nestedLayoutDefault:Do}),deps:{layoutDefault:er,footerDefault:{token:rr,optional:!0},headerDefault:{token:tr,optional:!0},errorBoundaryDefault:{token:nr,optional:!0}}}]})],Uo);const Ho=[(0,c.JJ)({provide:d.Ym,multi:!0,useValue:Mo}),(0,c.JJ)({provide:sr,useValue:"ssr"})];var Bo;let qo=Bo=class{static forRoot({mode:e,useStrictMode:t}){const r=[];return"string"!=typeof e&&"boolean"!=typeof t||r.push({provide:Kt,useValue:null!=t?t:"strict"===e}),{mainModule:Bo,providers:r}}};qo=Bo=(0,s.gn)([(0,c.Yl)({imports:[Uo],providers:[...Ho,(0,c.JJ)({provide:u.Bi.customerStart,multi:!0,useFactory:({router:e,store:t})=>function(){e.registerHook("beforeResolve",(async()=>{t.getState(Mo)&&t.dispatch(To(null))}))},deps:{router:Ln,store:d.kR}}),(0,c.JJ)({provide:Wt,useFactory:({logger:e})=>({getPageResources:()=>[],register:()=>{}}),deps:{logger:d.Fp}}),(0,c.JJ)({provide:u.Bi.generatePage,useFactory:e=>function(){return window.contextExternal=e.consumerContext,function({logger:e,consumerContext:t,customRender:n,extendRender:o,di:s,useStrictMode:i,rendererCallback:a}){const c=e("module-render");return new Promise(((e,u)=>{let l=function({di:e},t){const r=t.getState();return(0,me.jsx)(h.zt,{context:t,serverState:r,children:(0,me.jsx)(Pe.Provider,{value:e,children:(0,me.jsx)(_o,{})})})}({di:s},t);if(o&&oe()((e=>{l=e(l)}),o),n)return n(l);i&&(l=(0,fe.createElement)(fe.StrictMode,null,l));const d=document.querySelector(".application"),p=e=>null==a?void 0:a.forEach((t=>{try{t(e)}catch(e){console.error(e)}})),f={element:l,container:d,callback:()=>{c.debug("App rendering"),document.querySelector("html").classList.remove("no-js"),p(),e()},log:c};try{(({element:e,container:t,callback:n,log:o})=>{if("function"==typeof Po){const r=(0,fe.createElement)(Jo,{callback:n},e);let s=new Map;const i=Co()(50,(()=>{if(0===s.size)return;const[{error:e,errorInfo:t},...r]=Array.from(s.values());s=new Map,o.error({event:"hydrate:recover-after-error",error:e,errorInfo:t,otherErrors:r})}));return $o((()=>{Po(t,r,{onRecoverableError:(e,t)=>{s.set((null==e?void 0:e.message)+(null==t?void 0:t.componentStack),{error:e,errorInfo:t}),i()}})}))}const{hydrate:s}=r(776);s(e,t,n)})(f)}catch(e){p(e),u(e)}}))}(e)},deps:{logger:d.Fp,customRender:{token:zt,optional:!0},extendRender:{token:Zt,optional:!0},rendererCallback:{token:Xt,optional:!0},consumerContext:d.l6,di:c.ZF,useStrictMode:Kt},multi:!0}),(0,c.JJ)({provide:Xt,useFactory:({consumerContext:e})=>()=>{e.di.register({provide:"__TRAMVAI_HYDRATED",useValue:!0})},deps:{consumerContext:d.l6}}),(0,c.JJ)({provide:Kt,useFactory:({deprecatedMode:e})=>"strict"===e,deps:{deprecatedMode:Qt}}),(0,c.JJ)({provide:Qt,useValue:"legacy"})]})],qo);const Yo=(0,c.V3)("metricsModule"),Go=e=>Math.round(e)/1e3,Xo=e=>t=>e.test(t),zo=Xo(/\.js$/),Wo=Xo(/\.css$/),Qo=Xo(/\.(?:svg|png|jpeg|webp|jpg)$/),Ko=Xo(/\.(?:woff|eot|woff2|ttf)/);var Zo;!function(e){e.html="html",e.js="js",e.css="css",e.img="img",e.font="font",e.other="other"}(Zo||(Zo={}));const es=(e,t)=>{if(e.getEntriesByType)return e.getEntriesByType(t)},ts=e=>{const t=es(e,"paint");return t&&t[0]?t[0].startTime:0},rs=(e,t)=>e&&e[t]||0,ns=(e,t)=>({duration:rs(e,"duration")+Go(t.duration),transferSize:rs(e,"transferSize")+t.transferSize,encodedBodySize:rs(e,"encodedBodySize")+t.encodedBodySize});class os{constructor(e){}inc(){}reset(){}remove(){}labels(){return{inc(){}}}}class ss{constructor(e){}inc(){}dec(){}set(){}setToCurrentTime(){}reset(){}remove(){}startTimer(e){return e=>{}}labels(){return{inc(){},dec(){},set(){},setToCurrentTime(){},startTimer:()=>e=>{}}}}class is{constructor(e){}observe(){}startTimer(e){return e=>{}}reset(){}remove(){}labels(){return{observe(){},startTimer:()=>()=>{}}}}class as{constructor(e){}observe(){}startTimer(){return e=>{}}reset(){}labels(e){return{observe(){},startTimer:()=>e=>{}}}remove(){}}const cs=(0,c.V3)("papi service"),us=(0,h.yM)("set instant metrics map"),ls=(0,h.Lq)("instantMetrics",{instantMetricsMap:{}}).on(us,((e,t)=>t)),ds=[{provide:d.Ym,multi:!0,useValue:[ls]}];let hs=class{};hs=(0,s.gn)([(0,c.Yl)({providers:[...ds,{provide:u.Bi.init,scope:c.sX.SINGLETON,multi:!0,useFactory({logger:e,papiService:t,context:r}){if(!t)return()=>{};const n=r.getStore("instantMetrics").getState().instantMetricsMap,o=new Z({requestCount:1,emitLevels:{trace:!0,debug:!0,info:!0,warn:!0,error:!0,fatal:!0},makeRequest:e=>n[e.event]?t.request({path:`metrics/${e.event}`,method:"post",payload:e.value?{value:e.value}:{}}).then((({payload:e})=>e)):Promise.resolve()});return()=>{e.addBeforeReporter(o)}},deps:{papiService:{token:cs,optional:!0},context:d.l6,logger:d.Fp}}]})],hs),"undefined"!=typeof performance&&"function"==typeof performance.mark&&"function"==typeof performance.clearMarks&&"function"==typeof performance.measure&&performance.clearMeasures;let ps=class{};ps=(0,s.gn)([(0,c.Yl)({imports:[hs],providers:[{provide:Yo,useFactory:()=>({counter:e=>new os(Object.assign({},e)),gauge:e=>new ss(Object.assign({},e)),histogram:e=>new is(Object.assign({},e)),summary:e=>new as(Object.assign({},e))}),scope:c.sX.SINGLETON},{provide:u.Bi.init,useFactory:({logger:e,pageService:t})=>()=>{window.addEventListener("load",(()=>{setTimeout((()=>{var r,n;const o=function(){let e;try{if(e=window.performance,!e.timing||!e.timing.loadEventEnd)throw 0===e.timing.loadEventEnd&&console.error("Library used at browser initialization page. Reed docs"),new Error("Not implemented timing api")}catch(e){return{}}const{requestStart:t,responseStart:r,responseEnd:n,domComplete:o,loadEventEnd:s,domInteractive:i,navigationStart:a}=e.timing,c=[{key:"connection",start:a,end:t},{key:"backend",start:t,end:r},{key:"pageDownload",start:r,end:n},{key:"first-paint",start:0,end:ts(e)},{key:"domInteractive",start:a,end:i},{key:"domComplete",start:a,end:o},{key:"pageLoadTime",start:a,end:s}],u={};return c.forEach((e=>{const t=Go(e.end-e.start);u[e.key]=t>0||t<2e3?t:void 0})),u.download=(e=>{const t={},r=es(e,"resource");if(r&&r.length>0){const e={};r.forEach((r=>{const n=(e=>{switch(!0){case Wo(e):return Zo.css;case zo(e):return Zo.js;case Qo(e):return Zo.img;case Ko(e):return Zo.font;default:return Zo.other}})(r.name.split("?",1)[0]);Zo[n]&&(e[n]||(e[n]=0),e[n]++,t[n]=ns(t[n],r),t[n].count=e[n])}))}const n=es(e,"navigation");return n&&n.length>0&&(t[Zo.html]=ns({},n[0])),t})(e),u}();e({name:"metrics:perf",defaults:{remote:{emitLevels:{info:!0}}}}).info(Object.assign({},o,{event:"perf-timings",deviceType:-1!==(null===(r=navigator.userAgent)||void 0===r?void 0:r.indexOf("Mobi"))?"mobile":"desktop",urlMask:null===(n=t.getCurrentRoute())||void 0===n?void 0:n.path}))}),0)}))},multi:!0,deps:{logger:d.Fp,pageService:Vn}}]})],ps);const fs=[{provide:ee,useFactory:({appInfo:e})=>`/${e.appName}/papi`,deps:{appInfo:u.Qo}},{provide:te,useFactory:({appInfo:e})=>`/${e.appName}/private/papi`,deps:{appInfo:u.Qo}}];let gs=class{};gs=(0,s.gn)([(0,c.Yl)({providers:[...fs]})],gs);let ms=class{};ms=(0,s.gn)([(0,c.Yl)({imports:[ps,gs],providers:[]})],ms);const vs=[(0,c.JJ)({provide:Ue,useFactory:({logger:e})=>{const t=e("error-interceptor:error-boundary");return function(e,r){t.error({event:"component-did-catch",error:e,info:r})}},deps:{logger:d.Fp},multi:!0})];let ys=class{};ys=(0,s.gn)([(0,c.Yl)({providers:[...vs]})],ys);var bs=r(8790),ws=r.n(bs),Ss=r(3452),xs=r.n(Ss);class ks{constructor(){this.state=new Map}eachMeta(e){this.state.forEach(((t,r)=>e(t,r)))}updateMeta(e,t){var r;return a()(((t,r)=>{if(!t&&null!==t)return;const n=this.state.get(r);(!n||e>=n.priority)&&(null===t?this.state.delete(r):this.state.set(r,{value:t,priority:e}))}),t),null===(r=this.onChange)||void 0===r||r.call(this),this}get(e){return this.state.get(e)}reset(){this.state.clear()}subscribe(e){this.onChange=e}}const Cs=e=>ws()("tag",e)?e:null;class Es{constructor({list:e,transformValue:t=Dt(),converters:r={},metaWalk:n}){this.listSources=e,this.transformValue=t,this.converters=r,this.metaWalk=n}dataCollection(...e){var t;const r=null!==(t=this.metaWalk)&&void 0!==t?t:new ks;this.listSources.map((t=>t(r,...e)));let n=[];return r.eachMeta(((e,t)=>{const r=this.transformValue(e),o=(this.converters[t]||Cs)(r.value);o&&(n=n.concat($()(o)?o.filter(Dt()):o))})),n}}const Rs="data-meta-dynamic";xs()(((e,t,r)=>`${e} ${r}="${t}"`),"");const Ns=({tag:e,attributes:t,innerHtml:r})=>{const n=document.createElement(e);return r&&(n.innerHTML=r),t&&a()(((e,t)=>{n.setAttribute(t,e||"")}),t),n.setAttribute(Rs,"true"),n};class Os{constructor(e){this.meta=e}update(){const e=document.head||document.querySelector("head"),t=this.meta.dataCollection().map(Ns),r=e.querySelectorAll(`[${Rs}]`),n=document.createDocumentFragment();[].slice.call(r).forEach((t=>e.removeChild(t))),t.forEach((e=>n.appendChild(e))),e.insertBefore(n,e.firstChild)}}var js=r(6017),Ls=r.n(js),Ts=r(1547),Ms=r.n(Ts),Vs=r(6245),As=r.n(Vs),Fs=r(5591),Is=r.n(Fs);const _s=Ls()(F(),Ms(),Dt()),Ps=e=>e.priority>10?{priority:e.priority,value:_s(e.value)}:e,$s=(0,c.V3)("metaDefaultPack"),Js=(0,c.V3)("metaWalk"),Ds=(0,c.V3)("metaUpdater",{multi:!0}),Us=(e,t={})=>{const r={};return Object.keys(t).forEach((n=>{var o;r[e+(o=n,`${o.charAt(0).toUpperCase()}${o.slice(1)}`)]=t[n]})),r},Hs=[{provide:Js,useClass:ks},{provide:$s,useValue:{title:"Tramvai"}},{provide:Ds,multi:!0,useFactory:({defaultMeta:e})=>{return t=e,e=>{e.updateMeta(0,t)};var t},deps:{defaultMeta:$s}},{provide:Ds,useFactory:({pageService:e})=>t=>{const r=e.getMeta().seo||{},{pageComponent:n}=e.getConfig()||{},o=(e.getComponent(n)||{}).seo||{},s=As()({},r,o),i=s.shareSchema||{},a=Object.assign({},s.metaTags,Us("twitter",i.twitterCard),Us("og",i.openGraph));t.updateMeta(10,a)},multi:!0,deps:{pageService:Vn}},{provide:Ds,multi:!0,useFactory:({context:e,metaList:t})=>{const r=ot()(t||[]);return t=>{r.forEach((r=>r(e,t)))}},deps:{context:d.l6,metaList:{token:"metaList",optional:!0}}}],Bs=Is()(2,((e,t)=>t&&{tag:e,innerHtml:t})),qs=Is()(2,((e,t)=>t&&{tag:"meta",attributes:{name:e,content:t}})),Ys=Is()(2,((e,t)=>t&&{tag:"meta",attributes:{property:e,content:t}})),Gs=Is()(2,((e,t)=>t&&{tag:"link",attributes:{rel:e,href:t}})),Xs=[qs("robots","noindex, follow"),qs("robots","noarchive")],zs=[qs("robots","index, nofollow"),qs("robots","noarchive")],Ws=[qs("robots","none"),qs("robots","noindex, nofollow"),qs("robots","noarchive")],Qs={all:[qs("robots","all"),qs("robots","index, follow"),qs("robots","noarchive")],noindex:Xs,"noindex, follow":Xs,nofollow:zs,"index, nofollow":zs,none:Ws,"noindex, nofollow":Ws},Ks={title:Bs("title"),description:qs("description"),keywords:qs("keywords"),canonical:Gs("canonical"),viewport:qs("viewport"),ogTitle:Ys("og:title"),ogDescription:Ys("og:description"),ogSiteName:Ys("og:site_name"),ogUrl:Ys("og:url"),ogType:Ys("og:type"),ogImage:Ys("og:image"),ogImageSecure:Ys("og:image:secure_url"),ogImageType:Ys("og:image:type"),ogImageAlt:Ys("og:image:alt"),ogImageWidth:Ys("og:image:width"),ogImageHeight:Ys("og:image:height"),ogLocale:Ys("og:locale"),twitterTitle:qs("twitter:title"),twitterDescription:qs("twitter:description"),twitterCard:qs("twitter:card"),twitterSite:qs("twitter:site"),twitterCreator:qs("twitter:creator"),twitterImage:qs("twitter:image"),twitterImageAlt:qs("twitter:image:alt"),robots:e=>Qs[e]};var Zs;let ei=Zs=class{static forRoot(e){if($()(e))return{mainModule:Zs,providers:[{provide:"metaList",useValue:e,multi:!0}]};const{metaUpdaters:t,metaDefault:r}=e,n=[];return r&&n.push({provide:$s,useValue:r}),t&&n.push({provide:Ds,useValue:t,multi:!0}),{providers:n,mainModule:Zs}}};ei=Zs=(0,s.gn)([(0,c.Yl)({providers:[...Hs,(0,c.JJ)({provide:u.Bi.spaTransition,multi:!0,useFactory:({metaWalk:e,metaUpdaters:t})=>{const r=new Es({list:ot()(t||[]),transformValue:Ps,converters:Ks,metaWalk:e});let n=!1;const o=()=>{n=!0,new Os(r).update(),n=!1},s=Co()(500,o);return e.subscribe((()=>{n||s()})),function(){e.reset(),o()}},deps:{metaWalk:Js,metaUpdaters:{token:Ds,optional:!0,multi:!0}}})]})],ei);var ti,ri,ni=r(9644),oi=r.n(ni);!function(e){e.static="static",e.dynamic="dynamic"}(ti||(ti={})),ti.static,ti.dynamic,function(e){e.iconLink="iconLink",e.meta="meta",e.inlineScript="inlineScript",e.script="script",e.asIs="asIs",e.preconnectLink="preconnectLink",e.preloadLink="preloadLink",e.inlineStyle="inlineStyle",e.style="style"}(ri||(ri={})),ri.iconLink,ri.meta,ri.inlineScript,ri.script,ri.asIs,ri.preconnectLink,ri.preloadLink,ri.inlineStyle,ri.style;const si=new Set(["link"]),ii=xs()(((e,t,r)=>r&&t?`${e} ${r}="${t}"`:null===t?e:`${e} ${r}`),""),ai={[ri.asIs]:oi()("payload"),[ri.iconLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{href:e})}),[ri.meta]:oi()("payload"),[ri.inlineScript]:({payload:e,attrs:t})=>({tag:"script",innerHtml:e,attributes:t}),[ri.script]:({payload:e,attrs:t})=>({tag:"script",attributes:Object.assign({defer:"defer",charset:"utf-8",crossorigin:"anonymous"},t,{src:e})}),[ri.preconnectLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{rel:"preconnect",href:e})}),[ri.preloadLink]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({charset:"utf-8"},t,{rel:"preload",href:e})}),[ri.inlineStyle]:({payload:e})=>({tag:"style",attributes:{type:"text/css"},innerHtml:e}),[ri.style]:({payload:e,attrs:t})=>({tag:"link",attributes:Object.assign({},t,{rel:"stylesheet",href:e})})};we()((e=>(...t)=>{const r=e(...t);return"string"==typeof r?r:(({tag:e,attributes:t,innerHtml:r})=>{const n=`${ii(t)}`;return si.has(e)?`<${e}${n}>`:r?`<${e}${n}>${r}</${e}>`:`<${e}${n}></${e}>`})(r)}),ai);var ci=r(4250);(0,n.ri)({name:"sketch",modules:[$r,wo,qo.forRoot({mode:"strict"}),ei,ms,ys,ci.q],providers:[{provide:Gt,multi:!0,useValue:{type:ri.asIs,slot:"head:meta",payload:'<meta name="viewport" content="width=device-width, initial-scale=1">'}}]})},4250:function(e,t,r){"use strict";r.d(t,{v:function(){return Ne},q:function(){return je}});var n=r(1919),o=r(1865),s=r(4077),i=r(5668);const a=(0,i.yM)("UNDO"),c=(0,i.yM)("REDO"),u=(0,i.yM)("PUSH_TO_HISTORY"),l=(0,i.yM)("SET_CANVAS"),d=(0,i.yM)("SET_TOOL"),h=(0,i.yM)("INCREMENT_CURRENT_INDEX_FRAME"),p=(0,i.yM)("DECREMENT_CURRENT_INDEX_FRAME"),f=(0,i.yM)("SET_CURRENT_INDEX_FRAME"),g=(0,i.yM)("SET_HISTORY"),m=(0,i.yM)("SLICE_STORY"),v=(0,i.yM)("SET_IS_LAST_BROWSE"),y=(0,i.yM)("SET_LINE_WIDTH"),b=(0,i.yM)("SET_FILL_COLOR"),w=(0,i.yM)("SET_STROKE_COLOR"),S=(0,i.Lq)("sketchStore",{canvasStore:{canvas:null,browser:{history:[],currentIndexFrame:-1,isLastBrowse:!1}},tool:null}).on(l,((e,t)=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{canvas:t})}))).on(d,((e,t)=>Object.assign({},e,{tool:t}))).on(u,((e,t)=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{history:[...e.canvasStore.browser.history,t]})})}))).on(h,(e=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{currentIndexFrame:e.canvasStore.browser.currentIndexFrame+1})})}))).on(p,(e=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{currentIndexFrame:e.canvasStore.browser.currentIndexFrame-1})})}))).on(f,((e,t)=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{currentIndexFrame:t})})}))).on(g,((e,t)=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{history:t})})}))).on(m,(e=>{const{browser:t}=e.canvasStore,r=t.currentIndexFrame,n=t.history.slice(0,r+1);return Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{history:n})})})})).on(v,((e,t)=>Object.assign({},e,{canvasStore:Object.assign({},e.canvasStore,{browser:Object.assign({},e.canvasStore.browser,{isLastBrowse:t})})}))).on(y,((e,t)=>(e.tool&&(e.tool.lineWidth=t),e))).on(b,((e,t)=>(e.tool&&(e.tool.fillColor=t),e))).on(w,((e,t)=>(e.tool&&(e.tool.strokeColor=t),e)));var x=r(4121),k=r(2553);const C=(0,k.HA)({name:"setCanvas",async fn(e){this.dispatch(l(e))}}),E=(0,k.HA)({name:"setTool",async fn(e){this.dispatch(d(e))}}),R=(0,k.HA)({name:"setLineWidth",async fn(e){this.dispatch(y(e))}}),N=(0,k.HA)({name:"setFillColor",async fn(e){this.dispatch(b(e))}}),O=(0,k.HA)({name:"setStrokeColor",async fn(e){this.dispatch(w(e))}}),j=((0,k.HA)({name:"undo",async fn(){this.dispatch(a())}}),(0,k.HA)({name:"redo",async fn(){this.dispatch(c())}}),(0,k.HA)({name:"pushToHistory",async fn(e){const t=Number(localStorage.getItem("currentIndexFrame"));localStorage.setItem("currentIndexFrame",`${t+1}`);const r=JSON.parse(localStorage.getItem("history"));localStorage.setItem("history",JSON.stringify([...r,e])),await this.dispatch(u(e)),await this.dispatch(h()),await this.dispatch(v(!1))}})),L=((0,k.HA)({name:"incrementCurrentIndexFrame",async fn(){this.dispatch(h())}}),(0,k.HA)({name:"decrementCurrentIndexFrame",async fn(){this.dispatch(p())}}),(0,k.HA)({name:"setCurrentIndexFrame",async fn(e){this.dispatch(f(e))}})),T=(0,k.HA)({name:"setHistory",async fn(e){this.dispatch(g(e))}}),M=(0,k.HA)({name:"sliceStory",async fn(){this.dispatch(m())}}),V=(0,k.HA)({name:"setIsLastBrowse",async fn(e){this.dispatch(v(e))}});var A=r(4641),F=r.n(A),I=r(130);const _=({width:e,height:t})=>{const r=(0,x.useRef)(),n=(0,i.ol)(C),o=(0,i.ol)(j),s=(0,i.ol)(M),a=(0,i.ol)(T),c=(0,i.ol)(L),u=(0,i.v9)(S,(({sketchStore:e})=>e.canvasStore.browser.isLastBrowse)),l=(0,i.ol)(V);return(0,x.useEffect)((()=>{let e;n(r.current);const t=localStorage.getItem("history"),o=localStorage.getItem("currentIndexFrame"),s=localStorage.getItem("isLastBrowse");if(t&&"string"==typeof o){const r=JSON.parse(t),n=Number(o);a(r),c(n),e=r[n]}else localStorage.setItem("history","[]"),localStorage.setItem("currentIndexFrame","-1"),localStorage.setItem("isLastBrowse","0");s&&l(Boolean(s));const i=r.current.getContext("2d");if(e&&i){const t=new Image;t.src=e,t.onload=()=>{i.clearRect(0,0,r.current.width,r.current.height),i.drawImage(t,0,0,r.current.width,r.current.height)}}}),[n,c,a,l]),(0,I.jsx)("canvas",{className:F().canvas,width:e,height:t,ref:r,onMouseUp:()=>(async()=>{u&&(await s(),await l(!1),localStorage.setItem("isLastBrowse","0"));const e=r.current.toDataURL();await o(e);const t=localStorage.getItem("history");0===Array.from(JSON.parse(t)).length&&localStorage.setItem("history",JSON.stringify([e]))})()})};var P=r(2109),$=r.n(P),J=r(6861),D=r.n(J);const U=r.p+"ab3aa2ed88b172bdd568d5ca1a311c52.png",H=(r.p,r.p+"4d54b29b10e37da7ff7dd8ea40ae1ea6.png");r.p;var B=r(7412),q=r.n(B);const Y=()=>{const[e,t]=(0,i.ol)([N,O]);return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)("img",{className:D().tool,src:H,alt:""}),(0,I.jsx)("div",{className:q().colorContainer,children:(0,I.jsx)("input",{className:q().color,type:"color",onChange:r=>(r=>{e(r.target.value),t(r.target.value)})(r)})})]})};var G;const X=({isActive:e})=>{const t=(0,i.ol)(R);return(0,I.jsxs)("ul",{className:$()(D().sidebar,("brush"===e.tool||"rect"===e.tool)&&D().isActive),children:[(0,I.jsxs)("li",{children:[(0,I.jsx)("img",{className:D().tool,src:U,alt:"Толщина"}),(0,I.jsx)("input",{onChange:e=>t(e.target.value),id:"line-width",type:"range",min:1,max:50,defaultValue:1})]}),G||(G=(0,I.jsx)("li",{children:(0,I.jsx)(Y,{})}))]})};var z=r(7786),W=r.n(z);const Q=r.p+"35510ec03b70c36d7d03ffa7bdb8d285.png";r.p;var K,Z=r(2911),ee=r.n(Z);class te{constructor(e){this.canvas=void 0,this.ctx=void 0,this.canvas=e,this.ctx=e.getContext("2d")}set fillColor(e){this.ctx.fillStyle=e}set strokeColor(e){this.ctx.strokeStyle=e}set lineWidth(e){this.ctx.lineWidth=e}destroyEvent(){this.canvas.onmousemove=null,this.canvas.onmousedown=null,this.canvas.onmouseup=null}}class re extends te{constructor(e){super(e),this.isMouseDown=!1,this.listen()}listen(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this)}mouseUpHandler(e){this.isMouseDown=!1}mouseDownHandler(e){this.isMouseDown=!0,this.ctx.beginPath(),this.ctx.moveTo(e.pageX-e.target.offsetLeft,e.pageY-e.target.offsetTop)}mouseMoveHandler(e){this.isMouseDown&&this.draw(e.pageX-e.target.offsetLeft,e.pageY-e.target.offsetTop)}draw(e,t){this.ctx.lineTo(e,t),this.ctx.stroke()}}const ne=({setActive:e,isToolActive:t})=>{const r=(0,i.ol)(E),n=(0,i.v9)(S,(e=>e.sketchStore.canvasStore.canvas));return(0,I.jsx)("button",{type:"button",className:$()(ee().tool,"brush"===t.tool&&ee().active),onClick:()=>{n&&(e({tool:"brush"}),r(new re(n)))},children:K||(K=(0,I.jsx)("img",{src:Q,alt:"brush"}))})},oe=r.p+"624be59b866c8cc04e18389992683d8d.png";var se;r.p;const ie=({setActive:e,isToolActive:t})=>{const r=(0,i.ol)(E),n=(0,i.v9)(S,(e=>e.sketchStore.canvasStore.canvas)),o=(0,i.v9)(S,(e=>e.sketchStore.tool));return(0,I.jsx)("button",{type:"button",className:$()(ee().tool,"cursor"===t.tool&&ee().active),onClick:()=>{n&&(e({tool:"cursor"}),o&&o.destroyEvent(),r(null))},children:se||(se=(0,I.jsx)("img",{src:oe,alt:"cursor"}))})},ae=r.p+"4397c2416f2680d8327b01f25f113558.png";var ce;r.p;const ue=()=>{const e=(0,i.v9)(S,(e=>e.sketchStore.canvasStore.canvas)),t=(0,i.ol)(j),r=null==e?void 0:e.getContext("2d");return(0,I.jsx)("button",{type:"button",className:ee().tool,onClick:()=>{if(r&&e){r.clearRect(0,0,e.width,e.height);const n=e.toDataURL(),o=new Image;o.src=n,o.onload=()=>{null==r||r.clearRect(0,0,e.width,e.height),null==r||r.drawImage(o,0,0,e.width,e.height)},t(n)}},children:ce||(ce=(0,I.jsx)("img",{src:ae,alt:"eraser"}))})},le=r.p+"aac093baee310feb4c395ed22b8837bf.png";r.p;class de extends te{constructor(e){super(e),this.isMouseDown=!1,this.startX=0,this.startY=0,this.saved="",this.listen()}listen(){this.canvas.onmousemove=this.mouseMoveHandler.bind(this),this.canvas.onmousedown=this.mouseDownHandler.bind(this),this.canvas.onmouseup=this.mouseUpHandler.bind(this)}mouseUpHandler(e){this.isMouseDown=!1}mouseDownHandler(e){this.isMouseDown=!0,this.ctx.beginPath(),this.startX=e.pageX-e.target.offsetLeft,this.startY=e.pageY-e.target.offsetTop,this.saved=this.canvas.toDataURL()}mouseMoveHandler(e){if(this.isMouseDown){const t=e.pageX-e.target.offsetLeft,r=e.pageY-e.target.offsetTop,n=t-this.startX,o=r-this.startY;this.draw(this.startX,this.startY,n,o)}}draw(e,t,r,n){const o=new Image;o.src=this.saved,o.onload=()=>{this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.drawImage(o,0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(e,t,r,n),this.ctx.stroke(),this.ctx.fill()}}}var he;const pe=({setActive:e,isToolActive:t})=>{const r=(0,i.ol)(E),n=(0,i.v9)(S,(({sketchStore:e})=>e.canvasStore.canvas));return(0,I.jsx)("button",{type:"button",className:$()(ee().tool,"rect"===t.tool&&ee().active),onClick:()=>{n&&(e({tool:"rect",isActive:!0}),r(new de(n)))},children:he||(he=(0,I.jsx)("img",{src:le,alt:"eraser"}))})},fe=r.p+"63c83c0c7b8a775771e1e0ecd5836d43.png",ge=(r.p,r.p+"4857e5082b6e83571364b8c6fec20bca.png");r.p;var me,ve,ye=r(9362),be=r.n(ye);const we=()=>{const[e,t]=(()=>{const e=(0,i.v9)(S,(({sketchStore:e})=>e.canvasStore.canvas)),t=(0,i.v9)(S,(({sketchStore:e})=>e.canvasStore.browser.currentIndexFrame)),r=(0,i.v9)(S,(({sketchStore:e})=>e.canvasStore.browser.history)),n=(0,i.ol)(L),o=(0,i.ol)(V);if(!e)return[];const s=e.getContext("2d");return[async()=>{if(t>=0){await o(!0),localStorage.setItem("isLastBrowse","1");const i=t-1,a=r[i];a||(null==s||s.clearRect(0,0,e.width,e.height),localStorage.setItem("currentIndexFrame","-1")),await n(i);const c=new Image;c.src=a,c.onload=()=>{null==s||s.clearRect(0,0,e.width,e.height),null==s||s.drawImage(c,0,0,e.width,e.height)},localStorage.setItem("currentIndexFrame",`${i}`)}},async()=>{if(r.length>0){await o(!0),localStorage.setItem("isLastBrowse","1");const i=t+1,a=r[i]?r[i]:null;if(!a)return;await n(i);const c=new Image;c.src=a,c.onload=()=>{null==s||s.clearRect(0,0,e.width,e.height),null==s||s.drawImage(c,0,0,e.width,e.height)},localStorage.setItem("currentIndexFrame",`${i}`)}}]})();return(0,I.jsxs)("div",{className:be().undoRedoBar,children:[(0,I.jsx)("button",{type:"button",onClick:e,className:ee().tool,children:me||(me=(0,I.jsx)("img",{src:fe,alt:"undo"}))}),(0,I.jsx)("button",{type:"button",onClick:t,className:ee().tool,children:ve||(ve=(0,I.jsx)("img",{src:ge,alt:"redo"}))})]})};var Se,xe;const ke=()=>{const[e,t]=(0,x.useState)({tool:""});return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)("div",{className:W().toolbar,children:[(0,I.jsx)(ie,{setActive:t,isToolActive:e}),(0,I.jsx)(ne,{setActive:t,isToolActive:e}),(0,I.jsx)(pe,{setActive:t,isToolActive:e}),Se||(Se=(0,I.jsx)(ue,{})),xe||(xe=(0,I.jsx)(we,{}))]}),(0,I.jsx)(X,{isActive:e})]})};var Ce,Ee=r(235),Re=r.n(Ee);const Ne=({widthProp:e,heightProp:t})=>{const r=(0,n.GS)(),{width:o,height:s}=r,i=e||o||1e3,a=t||s||1e3;return(0,I.jsxs)("div",{className:Re().sketch,children:[Ce||(Ce=(0,I.jsx)(ke,{})),(0,I.jsx)(_,{width:i,height:a})]})};var Oe;let je=(0,o.Yl)({imports:[n.pY],providers:[{provide:s.Ym,multi:!1,useValue:[S]}]})(Oe=class{})||Oe},5373:function(e,t,r){"use strict";var n=r(4121),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},s=n.useState,i=n.useEffect,a=n.useLayoutEffect,c=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!o(e,r)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=s({inst:{value:r,getSnapshot:t}}),o=n[0].inst,l=n[1];return a((function(){o.value=r,o.getSnapshot=t,u(o)&&l({inst:o})}),[e,r,t]),i((function(){return u(o)&&l({inst:o}),e((function(){u(o)&&l({inst:o})}))}),[e]),c(r),r};t.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:l},1766:function(e,t,r){"use strict";var n=r(4121),o=r(4073),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=o.useSyncExternalStore,a=n.useRef,c=n.useEffect,u=n.useMemo,l=n.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,r,n,o){var d=a(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=u((function(){function e(e){if(!c){if(c=!0,i=e,e=n(e),void 0!==o&&h.hasValue){var t=h.value;if(o(t,e))return a=t}return a=e}if(t=a,s(i,e))return t;var r=n(e);return void 0!==o&&o(t,r)?t:(i=e,a=r)}var i,a,c=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]}),[t,r,n,o]);var p=i(e,d[0],d[1]);return c((function(){h.hasValue=!0,h.value=p}),[p]),l(p),p}},4073:function(e,t,r){"use strict";e.exports=r(5373)},248:function(e,t,r){"use strict";e.exports=r(1766)}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},n=!0;try{s[e](r,r.exports,a),n=!1}finally{n&&delete i[e]}return r.exports}a.m=s,a.c=i,e=[],a.O=function(t,r,n,o){if(!r){var s=1/0;for(l=0;l<e.length;l++){for(var[r,n,o]=e[l],i=!0,c=0;c<r.length;c++)(!1&o||s>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[c])}))?r.splice(c--,1):(i=!1,o<s&&(s=o));if(i){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[r,n,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,r){return a.f[r](e,t),t}),[]))},a.u=function(e){return e+".a0e18e7c67023998.chunk.js"},a.miniCssF=function(e){return e+".4249c7fafdd6d8e1.chunk.css"},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t={},r="@tramvai/cli:",a.l=function(e,n,o,s){if(t[e])t[e].push(n);else{var i,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){i=d;break}}i||(c=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=240,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",r+o),i.src=e,0!==i.src.indexOf(window.location.origin+"/")&&(i.crossOrigin="anonymous")),t[e]=[n];var h=function(r,n){i.onerror=i.onload=null,clearTimeout(p);var o=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),r)return r(n)},p=setTimeout(h.bind(null,void 0,{type:"timeout",target:i}),24e4);i.onerror=h.bind(null,i.onerror),i.onload=h.bind(null,i.onload),c&&document.head.appendChild(i)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p=window.ap,function(){a.S={};var e={},t={};a.I=function(r,n){n||(n=[]);var o=t[r];if(o||(o=t[r]={}),!(n.indexOf(o)>=0)){if(n.push(o),e[r])return e[r];a.o(a.S,r)||(a.S[r]={});var s=a.S[r],i="@tramvai/cli",c=function(e,t,r,n){var o=s[e]=s[e]||{},a=o[t];(!a||!a.loaded&&(!n!=!a.eager?n:i>a.from))&&(o[t]={get:r,from:i,eager:!!n})},u=[];return"default"===r&&(c("react-dom","18.2.0",(function(){return function(){return a(5675)}}),1),c("react/jsx-runtime","18.2.0",(function(){return function(){return a(5500)}}),1),c("react","18.2.0",(function(){return function(){return a(7077)}}),1)),e[r]=u.length?Promise.all(u).then((function(){return e[r]=1})):1}}}(),function(){var e=function(e){var t=function(e){return e.split(".").map((function(e){return+e==e?+e:e}))},r=/^([^-+]+)?(?:-([^+]+))?(?:\+(.+))?$/.exec(e),n=r[1]?t(r[1]):[];return r[2]&&(n.length++,n.push.apply(n,t(r[2]))),r[3]&&(n.push([]),n.push.apply(n,t(r[3]))),n},t=function(t,r){var n=t[r];return Object.keys(n).reduce((function(t,r){return!t||!n[t].loaded&&function(t,r){t=e(t),r=e(r);for(var n=0;;){if(n>=t.length)return n<r.length&&"u"!=(typeof r[n])[0];var o=t[n],s=(typeof o)[0];if(n>=r.length)return"u"==s;var i=r[n],a=(typeof i)[0];if(s!=a)return"o"==s&&"n"==a||"s"==a||"u"==s;if("o"!=s&&"u"!=s&&o!=i)return o<i;n++}}(t,r)?r:t}),0)},r=function(e){return e.loaded=1,e.get()},n=function(e){return function(t,r,n,o){var s=a.I(t);return s&&s.then?s.then(e.bind(e,t,a.S[t],r,n,o)):e(t,a.S[t],r,n,o)}}((function(e,n,o,s){return n&&a.o(n,o)?function(e,n,o,s){var i=t(e,o);return r(e[o][i])}(n,0,o):s()})),o={},s={130:function(){return n("default","react/jsx-runtime",(function(){return function(){return a(5500)}}))},4121:function(){return n("default","react",(function(){return function(){return a(7077)}}))},776:function(){return n("default","react-dom",(function(){return function(){return a(5675)}}))}};[130,4121,776].forEach((function(e){a.m[e]=function(t){o[e]=0,delete a.c[e];var r=s[e]();if("function"!=typeof r)throw new Error("Shared module is not available for eager consumption: "+e);t.exports=r()}}));var i={};a.f.consumes=function(e,t){a.o(i,e)&&i[e].forEach((function(e){if(a.o(o,e))return t.push(o[e]);var r=function(t){o[e]=0,a.m[e]=function(r){delete a.c[e],r.exports=t()}},n=function(t){delete o[e],a.m[e]=function(r){throw delete a.c[e],t}};try{var i=s[e]();i.then?t.push(o[e]=i.then(r).catch(n)):r(i)}catch(e){n(e)}}))}}(),n=function(e){return new Promise((function(t,r){var n=a.miniCssF(e),o=a.p+n;if(function(e,t){for(var r=document.getElementsByTagName("link"),n=0;n<r.length;n++){var o=(i=r[n]).getAttribute("data-href")||i.getAttribute("href");if("stylesheet"===i.rel&&(o===e||o===t))return i}var s=document.getElementsByTagName("style");for(n=0;n<s.length;n++){var i;if((o=(i=s[n]).getAttribute("data-href"))===e||o===t)return i}}(n,o))return t();!function(e,t,r,n){var o=document.createElement("link");o.rel="stylesheet",o.type="text/css",o.onerror=o.onload=function(s){if(o.onerror=o.onload=null,"load"===s.type)r();else{var i=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=i,c.request=a,o.parentNode.removeChild(o),n(c)}},o.href=t,0!==o.href.indexOf(window.location.origin+"/")&&(o.crossOrigin="anonymous"),document.head.appendChild(o)}(e,o,t,r)}))},o={platform:0},a.f.miniCss=function(e,t){o[e]?t.push(o[e]):0!==o[e]&&{"@_routes_index":1}[e]&&t.push(o[e]=n(e).then((function(){o[e]=0}),(function(t){throw delete o[e],t})))},function(){var e={platform:0};a.f.j=function(t,r){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((function(r,o){n=e[t]=[r,o]}));r.push(n[2]=o);var s=a.p+a.u(t),i=new Error;a.l(s,(function(r){if(a.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),s=r&&r.target&&r.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+s+")",i.name="ChunkLoadError",i.type=o,i.request=s,n[1](i)}}),"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,[s,i,c]=r,u=0;if(s.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(c)var l=c(a)}for(t&&t(r);u<s.length;u++)o=s[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(l)},r=self.wsp=self.wsp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var c=a.O(void 0,["react"],(function(){return a(8055)}));c=a.O(c)}();